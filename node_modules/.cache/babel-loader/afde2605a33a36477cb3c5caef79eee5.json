{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\ngota\\\\OneDrive\\\\Documents\\\\GitHub\\\\WebBanDienThoai\\\\CMD_WebBanDienThoai\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport { get, omit, cloneDeep } from \"lodash\";\nimport { ProductsActionTypes } from \"../actions/products\";\nvar init = {\n  loading: true,\n  detail: null,\n  processing: false\n};\n\nfunction handleUpdate(_ref) {\n  var state = _ref.state,\n      action = _ref.action;\n  var list = cloneDeep(state.list);\n  var detailData = get(action, \"payload.data\");\n  var index = list.findIndex(function (i) {\n    return i.id === detailData.id;\n  });\n  console.log(\"index\", index);\n\n  if (index !== -1) {\n    list[index] = _objectSpread(_objectSpread({}, list[index]), detailData);\n  }\n\n  return _objectSpread(_objectSpread({}, state), {}, {\n    processing: false,\n    list: list,\n    detail: _objectSpread(_objectSpread({}, state.detail), {}, {\n      data: _objectSpread(_objectSpread({}, state.detail.data), detailData)\n    })\n  });\n}\n\nexport default function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : init;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ProductsActionTypes.CLEAR_DETAIL:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        detail: null,\n        loadingDetail: true\n      });\n\n    case ProductsActionTypes.CLEAR_STATE:\n      return _objectSpread({}, init);\n\n    /* case ProductsActionTypes.GET_LIST:\n      return {\n        ...state,\n        loading: true,\n      }; */\n\n    case ProductsActionTypes.GET_LIST_ERROR:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loading: false\n        /*apiResultGetList: omit(get(action, \"payload\"), [\"data\"]), */\n\n      });\n\n    case ProductsActionTypes.GET_LIST_SUCCESS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loading: false,\n        list: get(action, \"payload\", [])\n      });\n\n    case ProductsActionTypes.GET_DETAIL:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loadingDetail: true,\n        detail: null\n      });\n\n    case ProductsActionTypes.GET_DETAIL_SUCCESS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loadingDetail: false,\n        detail: action.payload\n      });\n\n    case ProductsActionTypes.GET_DETAIL_ERROR:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loadingDetail: false,\n        detail: action.payload\n      });\n\n    case ProductsActionTypes.CREATE:\n    case ProductsActionTypes.UPDATE:\n    case ProductsActionTypes.DELETE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        processing: true\n      });\n\n    case ProductsActionTypes.CREATE_ERROR:\n    case ProductsActionTypes.UPDATE_ERROR:\n    case ProductsActionTypes.DELETE_ERROR:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        processing: false\n      });\n\n    case ProductsActionTypes.UPDATE_SUCCESS:\n      return handleUpdate({\n        state: state,\n        action: action\n      });\n\n    case ProductsActionTypes.CREATE_SUCCESS:\n    case ProductsActionTypes.DELETE_SUCCESS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        processing: false\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["C:/Users/ngota/OneDrive/Documents/GitHub/WebBanDienThoai/CMD_WebBanDienThoai/src/redux/reducers/products.js"],"names":["get","omit","cloneDeep","ProductsActionTypes","init","loading","detail","processing","handleUpdate","state","action","list","detailData","index","findIndex","i","id","console","log","data","type","CLEAR_DETAIL","loadingDetail","CLEAR_STATE","GET_LIST_ERROR","GET_LIST_SUCCESS","GET_DETAIL","GET_DETAIL_SUCCESS","payload","GET_DETAIL_ERROR","CREATE","UPDATE","DELETE","CREATE_ERROR","UPDATE_ERROR","DELETE_ERROR","UPDATE_SUCCESS","CREATE_SUCCESS","DELETE_SUCCESS"],"mappings":"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","sourcesContent":["import { get, omit, cloneDeep } from \"lodash\";\nimport { ProductsActionTypes } from \"../actions/products\";\n\nconst init = {\n  loading: true,\n  detail: null,\n  processing: false,\n};\n\nfunction handleUpdate({state, action}) {\n  const list = cloneDeep(state.list);\n  const detailData = get(action, \"payload.data\");\n  const index = list.findIndex(i => i.id === detailData.id);\n  console.log(\"index\", index);\n  if (index !== -1) {\n    list[index] = {...list[index], ...detailData};\n  }\n  return {\n    ...state,\n    processing: false,\n    list,\n    detail: {\n      ...state.detail,\n      data: { ...state.detail.data, ...detailData },\n    },\n  };\n}\n\nexport default function(state = init, action) {\n  switch (action.type) {\n    case ProductsActionTypes.CLEAR_DETAIL:\n      return {\n        ...state,\n        detail: null,\n        loadingDetail: true,\n      };\n\n    case ProductsActionTypes.CLEAR_STATE:\n      return {\n        ...init,\n      };\n\n    /* case ProductsActionTypes.GET_LIST:\n      return {\n        ...state,\n        loading: true,\n      }; */\n    case ProductsActionTypes.GET_LIST_ERROR:\n      return {\n        ...state,\n         loading: false,\n        /*apiResultGetList: omit(get(action, \"payload\"), [\"data\"]), */\n      };\n\n    case ProductsActionTypes.GET_LIST_SUCCESS:\n      return {\n        ...state,\n        loading: false,\n        list: get(action, \"payload\", []),\n      };\n\n    case ProductsActionTypes.GET_DETAIL:\n      return {\n        ...state,\n        loadingDetail: true,\n        detail: null,\n      };\n\n    case ProductsActionTypes.GET_DETAIL_SUCCESS:\n      return {\n        ...state,\n        loadingDetail: false,\n        detail: action.payload,\n      };\n\n    case ProductsActionTypes.GET_DETAIL_ERROR:\n      return {\n        ...state,\n        loadingDetail: false,\n        detail: action.payload,\n      };\n\n    case ProductsActionTypes.CREATE:\n    case ProductsActionTypes.UPDATE:\n    case ProductsActionTypes.DELETE:\n      return {\n        ...state,\n        processing: true,\n      };\n\n    case ProductsActionTypes.CREATE_ERROR:\n    case ProductsActionTypes.UPDATE_ERROR:\n    case ProductsActionTypes.DELETE_ERROR:\n      return {\n        ...state,\n        processing: false,\n      };\n    case ProductsActionTypes.UPDATE_SUCCESS:\n      return handleUpdate({state, action});\n\n    case ProductsActionTypes.CREATE_SUCCESS:\n    case ProductsActionTypes.DELETE_SUCCESS:\n      return {\n        ...state,\n        processing: false,\n      };\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}