{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\ngota\\\\OneDrive\\\\Documents\\\\GitHub\\\\WebBanDienThoai\\\\CMD_WebBanDienThoai\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\ngota\\\\OneDrive\\\\Documents\\\\GitHub\\\\WebBanDienThoai\\\\CMD_WebBanDienThoai\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\ngota\\\\OneDrive\\\\Documents\\\\GitHub\\\\WebBanDienThoai\\\\CMD_WebBanDienThoai\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"C:\\\\Users\\\\ngota\\\\OneDrive\\\\Documents\\\\GitHub\\\\WebBanDienThoai\\\\CMD_WebBanDienThoai\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\ngota\\\\OneDrive\\\\Documents\\\\GitHub\\\\WebBanDienThoai\\\\CMD_WebBanDienThoai\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport React, { useRef, useEffect, useMemo, useCallback, useState } from 'react';\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \".rmsc{--rmsc-main:#4285f4;--rmsc-hover:#f1f3f5;--rmsc-selected:#e2e6ea;--rmsc-border:#ccc;--rmsc-gray:#aaa;--rmsc-bg:#fff;--rmsc-p:10px;--rmsc-radius:4px;--rmsc-h:38px}.rmsc *{box-sizing:border-box;transition:all .2s ease}.rmsc .gray{color:var(--rmsc-gray)}.rmsc .dropdown-content{position:absolute;z-index:1;top:100%;width:100%;padding-top:8px}.rmsc .dropdown-content .panel-content{overflow:hidden;border-radius:var(--rmsc-radius);background:var(--rmsc-bg);box-shadow:0 0 0 1px rgba(0,0,0,.1),0 4px 11px rgba(0,0,0,.1)}.rmsc .dropdown-container{position:relative;outline:0;background-color:var(--rmsc-bg);border:1px solid var(--rmsc-border);border-radius:var(--rmsc-radius)}.rmsc .dropdown-container:focus-within{box-shadow:var(--rmsc-main) 0 0 0 1px;border-color:var(--rmsc-main)}.rmsc .dropdown-heading{position:relative;padding:0 var(--rmsc-p);display:flex;align-items:center;width:100%;height:var(--rmsc-h);cursor:default;outline:0}.rmsc .dropdown-heading .dropdown-heading-value{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1}.rmsc .clear-selected-button{cursor:pointer;background:none;border:0;padding:0;display:flex}.rmsc .options{max-height:260px;overflow-y:auto;margin:0;padding-left:0}.rmsc .options li{list-style:none;margin:0}.rmsc .select-item{box-sizing:border-box;cursor:pointer;display:block;padding:var(--rmsc-p);outline:0}.rmsc .select-item:focus,.rmsc .select-item:hover{background:var(--rmsc-hover)}.rmsc .select-item.selected{background:var(--rmsc-selected)}.rmsc .no-options{padding:var(--rmsc-p);text-align:center;color:var(--rmsc-gray)}.rmsc .search{width:100%;position:relative;border-bottom:1px solid var(--rmsc-border)}.rmsc .search input{height:var(--rmsc-h);padding:0 var(--rmsc-p);width:100%;outline:0;border:0}.rmsc .search-clear-button{cursor:pointer;position:absolute;top:0;right:0;bottom:0;background:none;border:0;padding:0 calc(var(--rmsc-p)/2)}.rmsc .search-clear-button [hidden]{display:none}.rmsc .item-renderer{display:flex;align-items:baseline}.rmsc .item-renderer input{margin:0 5px 0 0}.rmsc .item-renderer.disabled{opacity:.5}.rmsc .spinner{animation:rotate 2s linear infinite}.rmsc .spinner .path{stroke:var(--rmsc-border);stroke-width:4px;stroke-linecap:round;animation:dash 1.5s ease-in-out infinite}@keyframes rotate{to{transform:rotate(1turn)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}\";\nstyleInject(css_248z);\nvar defaultStrings = {\n  allItemsAreSelected: \"All items are selected.\",\n  clearSearch: \"Clear Search\",\n  clearSelected: \"Clear Selected\",\n  noOptions: \"No options\",\n  search: \"Search\",\n  selectAll: \"Select All\",\n  selectSomeItems: \"Select...\"\n};\nvar defaultProps = {\n  value: [],\n  hasSelectAll: true,\n  className: \"multi-select\",\n  debounceDuration: 200,\n  options: []\n};\nvar MultiSelectContext = /*#__PURE__*/React.createContext({});\n\nvar MultiSelectProvider = function MultiSelectProvider(_ref) {\n  var props = _ref.props,\n      children = _ref.children;\n\n  var t = function t(key) {\n    var _props$overrideString;\n\n    return ((_props$overrideString = props.overrideStrings) == null ? void 0 : _props$overrideString[key]) || defaultStrings[key];\n  };\n\n  return React.createElement(MultiSelectContext.Provider, {\n    value: _objectSpread(_objectSpread({\n      t: t\n    }, defaultProps), props)\n  }, children);\n};\n\nvar useMultiSelect = function useMultiSelect() {\n  return React.useContext(MultiSelectContext);\n};\n/**\r\n * similar to `useEffect` but gets triggered only when value changes\r\n * @param fn executable function on dependency updates\r\n * @param inputs dependency array\r\n */\n\n\nfunction useDidUpdateEffect(fn, inputs) {\n  var didMountRef = useRef(false);\n  useEffect(function () {\n    if (didMountRef.current) fn();else didMountRef.current = true;\n  }, inputs);\n}\n/*\r\n * copied from https://github.com/imbhargav5/rooks/blob/master/packages/shared/useKeyRef.ts\r\n */\n\n\nvar defaultOptions = {\n  when: true,\n  eventTypes: [\"keydown\"]\n};\n/**\r\n * useKey hook\r\n *\r\n * Fires a callback on keyboard events like keyDown, keyPress and keyUp\r\n *\r\n * @param {[string|number]} keyList\r\n * @param {function} callback\r\n * @param {Options} options\r\n */\n\nfunction useKey(input, callback, opts) {\n  var keyList = useMemo(function () {\n    return Array.isArray(input) ? input : [input];\n  }, [input]);\n  var options = Object.assign({}, defaultOptions, opts);\n  var when = options.when,\n      eventTypes = options.eventTypes;\n  var callbackRef = useRef(callback);\n  var target = options.target;\n  useEffect(function () {\n    callbackRef.current = callback;\n  });\n  var handle = useCallback(function (e) {\n    if (keyList.some(function (k) {\n      return e.key === k || e.code === k;\n    })) {\n      callbackRef.current(e);\n    }\n  }, [keyList]);\n  useEffect(function () {\n    if (when && typeof window !== \"undefined\") {\n      var targetNode = target ? target[\"current\"] : window;\n      eventTypes.forEach(function (eventType) {\n        targetNode && targetNode.addEventListener(eventType, handle);\n      });\n      return function () {\n        eventTypes.forEach(function (eventType) {\n          targetNode && targetNode.removeEventListener(eventType, handle);\n        });\n      };\n    }\n  }, [when, eventTypes, keyList, target, callback]);\n}\n\nvar KEY = {\n  ARROW_DOWN: \"ArrowDown\",\n  ARROW_UP: \"ArrowUp\",\n  ENTER: \"Enter\",\n  ESCAPE: \"Escape\",\n  SPACE: \"Space\"\n};\n\nvar debounce = function debounce(func, wait) {\n  var timeout;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      func.apply(null, args);\n    }, wait);\n  };\n};\n/**\r\n * Filters React Select options and sorts by similarity to a search filter.\r\n * Handles partial matches, eg. searching for \"Waberg High\" will find \"Raoul\r\n * Wallenberg Traditional High School\". Case insensitive. Ignores\r\n * non-alphanumeric characters.\r\n *\r\n * @param  options  An unfiltered list of Options.\r\n * @param? filter  A string to compare against Option labels.\r\n * @param? substitutions  Strings with multiple spellings or variations that we\r\n *           expect to match, eg. accented characters or abbreviated words.\r\n *\r\n * @return A filtered and sorted array of Options.\r\n */\n\n\nfunction filterOptions(options, filter, substitutions) {\n  // If the filter is blank, return the full list of Options.\n  if (!filter) {\n    return options;\n  }\n\n  var cleanFilter = cleanUpText(filter, substitutions);\n  return options // Filter out undefined or null Options.\n  .filter(function (_ref2) {\n    var label = _ref2.label,\n        value = _ref2.value;\n    return label != null && value != null;\n  }) // Create a {score, Option} pair for each Option based on its label's\n  // similarity to the filter text.\n  .map(function (option) {\n    return {\n      option: option,\n      score: typeaheadSimilarity(cleanUpText(option.label, substitutions), cleanFilter)\n    };\n  }) // Only include matches of the entire substring, with a slight\n  // affordance for transposition or extra characters.\n  .filter(function (pair) {\n    return pair.score >= cleanFilter.length - 2;\n  }) // Sort 'em by order of their score.\n  .sort(function (a, b) {\n    return b.score - a.score;\n  }) // …and grab the original Options back from their pairs.\n  .map(function (pair) {\n    return pair.option;\n  });\n}\n/**\r\n * Scores the similarity between two strings by returning the length of the\r\n * longest common subsequence. Intended for comparing strings of different\r\n * lengths; eg. when matching a typeahead search input with a school name.\r\n\n * Meant for use in an instant search box where results are being fetched\r\n * as a user is typing.\r\n *\r\n * @param  a  The longer string (though, we flip them if it's shorter).\r\n * @param  b  The shorter string, eg. a typeahead search input.\r\n *\r\n * @return The length of the longest common subsequence. Higher scores indicate\r\n *           closer matches.\r\n */\n\n\nfunction typeaheadSimilarity(a, b) {\n  var aLength = a.length;\n  var bLength = b.length;\n  var table = [];\n\n  if (!aLength || !bLength) {\n    return 0;\n  } // Ensure `a` isn't shorter than `b`.\n\n\n  if (aLength < bLength) {\n    var _ref3 = [b, a];\n    a = _ref3[0];\n    b = _ref3[1];\n  } // Early exit if `a` includes `b`; these will be scored higher than any\n  // other options with the same `b` (filter string), with a preference for\n  // shorter `a` strings (option labels).\n\n\n  if (a.indexOf(b) !== -1) {\n    return bLength + 1 / aLength;\n  } // Initialize the table axes:\n  //\n  //    0 0 0 0 ... bLength\n  //    0\n  //    0\n  //\n  //   ...\n  //\n  // aLength\n  //\n\n\n  for (var x = 0; x <= aLength; ++x) {\n    table[x] = [0];\n  }\n\n  for (var y = 0; y <= bLength; ++y) {\n    table[0][y] = 0;\n  } // Populate the rest of the table with a dynamic programming algorithm.\n\n\n  for (var _x = 1; _x <= aLength; ++_x) {\n    for (var _y = 1; _y <= bLength; ++_y) {\n      table[_x][_y] = a[_x - 1] === b[_y - 1] ? 1 + table[_x - 1][_y - 1] : Math.max(table[_x][_y - 1], table[_x - 1][_y]);\n    }\n  }\n\n  return table[aLength][bLength];\n}\n/**\r\n * Apply string substitutions, remove non-alphanumeric characters, and convert\r\n * all letters to uppercase.\r\n *\r\n * eg. 'Scoil Bhríde Primary School' may become 'SCOILBHRIDEPRIMARYSCHOOL'.\r\n *\r\n * @param  input  An unsanitized input string.\r\n * @param  substitutions  Strings with multiple spellings or variations that we\r\n *          expect to match, for example accented characters or abbreviated\r\n *          words.\r\n *\r\n * @return The sanitized text.\r\n */\n\n\nfunction cleanUpText(input, substitutions) {\n  if (!input) {\n    return \"\";\n  } // Uppercase and remove all non-alphanumeric, non-accented characters.\n  // Also remove underscores.\n\n\n  input = input.toUpperCase().replace(/((?=[^\\u00E0-\\u00FC])\\W)|_/g, \"\");\n\n  if (!substitutions) {\n    return input;\n  }\n\n  var safeSubstitutions = substitutions; // For Flow.\n  // Replace all strings in `safeSubstitutions` with their standardized\n  // counterparts.\n\n  return Object.keys(safeSubstitutions).reduce(function (output, substitution) {\n    var unsubbed = new RegExp(substitution, \"g\");\n    return output.replace(unsubbed, safeSubstitutions[substitution]);\n  }, input);\n}\n\nvar Cross = function Cross() {\n  return React.createElement(\"svg\", {\n    width: \"24\",\n    height: \"24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    className: \"dropdown-search-clear-icon gray\"\n  }, React.createElement(\"line\", {\n    x1: \"18\",\n    y1: \"6\",\n    x2: \"6\",\n    y2: \"18\"\n  }), React.createElement(\"line\", {\n    x1: \"6\",\n    y1: \"6\",\n    x2: \"18\",\n    y2: \"18\"\n  }));\n};\n\nvar DefaultItemRenderer = function DefaultItemRenderer(_ref4) {\n  var checked = _ref4.checked,\n      option = _ref4.option,\n      onClick = _ref4.onClick,\n      disabled = _ref4.disabled;\n  return React.createElement(\"div\", {\n    className: \"item-renderer \" + (disabled && \"disabled\")\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    onChange: onClick,\n    checked: checked,\n    tabIndex: -1,\n    disabled: disabled\n  }), React.createElement(\"span\", null, option.label));\n};\n/**\r\n * This component represents an individual item in the multi-select drop-down\r\n */\n\n\nvar SelectItem = function SelectItem(_ref5) {\n  var _ref5$itemRenderer = _ref5.itemRenderer,\n      ItemRenderer = _ref5$itemRenderer === void 0 ? DefaultItemRenderer : _ref5$itemRenderer,\n      option = _ref5.option,\n      checked = _ref5.checked,\n      tabIndex = _ref5.tabIndex,\n      disabled = _ref5.disabled,\n      onSelectionChanged = _ref5.onSelectionChanged,\n      onClick = _ref5.onClick;\n  var itemRef = useRef();\n\n  var onOptionCheck = function onOptionCheck(e) {\n    toggleChecked();\n    e.preventDefault();\n  };\n\n  var toggleChecked = function toggleChecked() {\n    if (!disabled) {\n      onSelectionChanged(!checked);\n    }\n  };\n\n  var handleClick = function handleClick(e) {\n    toggleChecked();\n    onClick(e);\n  };\n\n  useKey([KEY.ENTER, KEY.SPACE], onOptionCheck, {\n    target: itemRef\n  });\n  return React.createElement(\"label\", {\n    className: \"select-item \" + (checked && \"selected\"),\n    role: \"option\",\n    \"aria-selected\": checked,\n    tabIndex: tabIndex,\n    ref: itemRef\n  }, React.createElement(ItemRenderer, {\n    option: option,\n    checked: checked,\n    onClick: handleClick,\n    disabled: disabled\n  }));\n};\n/**\r\n * This component represents an unadorned list of SelectItem (s).\r\n */\n\n\nvar SelectList = function SelectList(_ref6) {\n  var options = _ref6.options,\n      _onClick = _ref6.onClick,\n      skipIndex = _ref6.skipIndex;\n\n  var _useMultiSelect = useMultiSelect(),\n      disabled = _useMultiSelect.disabled,\n      value = _useMultiSelect.value,\n      onChange = _useMultiSelect.onChange,\n      ItemRenderer = _useMultiSelect.ItemRenderer;\n\n  var handleSelectionChanged = function handleSelectionChanged(option, checked) {\n    if (disabled) return;\n    onChange(checked ? [].concat(_toConsumableArray(value), [option]) : value.filter(function (o) {\n      return o.value !== option.value;\n    }));\n  };\n\n  return React.createElement(React.Fragment, null, options.map(function (o, i) {\n    var tabIndex = i + skipIndex;\n    return React.createElement(\"li\", {\n      key: (o == null ? void 0 : o.key) || i\n    }, React.createElement(SelectItem, {\n      tabIndex: tabIndex,\n      option: o,\n      onSelectionChanged: function onSelectionChanged(c) {\n        return handleSelectionChanged(o, c);\n      },\n      checked: !!value.find(function (s) {\n        return s.value === o.value;\n      }),\n      onClick: function onClick(e) {\n        return _onClick(e, tabIndex);\n      },\n      itemRenderer: ItemRenderer,\n      disabled: o.disabled || disabled\n    }));\n  }));\n};\n/**\r\n * This component represents the entire panel which gets dropped down when the\r\n * user selects the component.  It encapsulates the search filter, the\r\n * Select-all item, and the list of options.\r\n */\n\n\nvar FocusType;\n\n(function (FocusType) {\n  FocusType[FocusType[\"SEARCH\"] = 0] = \"SEARCH\";\n  FocusType[FocusType[\"NONE\"] = -1] = \"NONE\";\n})(FocusType || (FocusType = {}));\n\nvar SelectPanel = function SelectPanel() {\n  var _useMultiSelect2 = useMultiSelect(),\n      t = _useMultiSelect2.t,\n      onChange = _useMultiSelect2.onChange,\n      options = _useMultiSelect2.options,\n      value = _useMultiSelect2.value,\n      customFilterOptions = _useMultiSelect2.filterOptions,\n      selectAllLabel = _useMultiSelect2.selectAllLabel,\n      ItemRenderer = _useMultiSelect2.ItemRenderer,\n      disabled = _useMultiSelect2.disabled,\n      disableSearch = _useMultiSelect2.disableSearch,\n      hasSelectAll = _useMultiSelect2.hasSelectAll,\n      ClearIcon = _useMultiSelect2.ClearIcon,\n      debounceDuration = _useMultiSelect2.debounceDuration;\n\n  var listRef = useRef();\n  var searchInputRef = useRef();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchText = _useState2[0],\n      setSearchText = _useState2[1];\n\n  var _useState3 = useState(options),\n      _useState4 = _slicedToArray(_useState3, 2),\n      filteredOptions = _useState4[0],\n      setFilteredOptions = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      searchTextForFilter = _useState6[0],\n      setSearchTextForFilter = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      focusIndex = _useState8[0],\n      setFocusIndex = _useState8[1];\n\n  var debouncedSearch = useCallback(debounce(function (query) {\n    return setSearchTextForFilter(query);\n  }, debounceDuration), []);\n  var skipIndex = useMemo(function () {\n    var start = 0;\n    if (!disableSearch) start += 1; // if search is enabled then +1 to skipIndex\n\n    if (hasSelectAll) start += 1; // if select-all is enabled then +1 to skipIndex\n\n    return start;\n  }, [disableSearch, hasSelectAll]);\n  var selectAllOption = {\n    label: selectAllLabel || t(\"selectAll\"),\n    value: \"\"\n  };\n\n  var selectAllValues = function selectAllValues(checked) {\n    var filteredValues = filteredOptions.filter(function (o) {\n      return !o.disabled;\n    }).map(function (o) {\n      return o.value;\n    });\n\n    if (checked) {\n      var selectedValues = value.map(function (o) {\n        return o.value;\n      });\n      var finalSelectedValues = [].concat(_toConsumableArray(selectedValues), _toConsumableArray(filteredValues));\n      return filteredOptions.filter(function (o) {\n        return finalSelectedValues.includes(o.value);\n      });\n    }\n\n    return value.filter(function (o) {\n      return !filteredValues.includes(o.value);\n    });\n  };\n\n  var selectAllChanged = function selectAllChanged(checked) {\n    var newOptions = selectAllValues(checked);\n    onChange(newOptions);\n  };\n\n  var handleSearchChange = function handleSearchChange(e) {\n    debouncedSearch(e.target.value);\n    setSearchText(e.target.value);\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  var handleClear = function handleClear() {\n    var _searchInputRef$curre;\n\n    setSearchTextForFilter(\"\");\n    setSearchText(\"\");\n    searchInputRef == null ? void 0 : (_searchInputRef$curre = searchInputRef.current) == null ? void 0 : _searchInputRef$curre.focus();\n  };\n\n  var handleItemClicked = function handleItemClicked(index) {\n    return setFocusIndex(index);\n  }; // Arrow Key Navigation\n\n\n  var handleKeyDown = function handleKeyDown(e) {\n    switch (e.code) {\n      case KEY.ARROW_UP:\n        updateFocus(-1);\n        break;\n\n      case KEY.ARROW_DOWN:\n        updateFocus(1);\n        break;\n\n      default:\n        return;\n    }\n\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  useKey([KEY.ARROW_DOWN, KEY.ARROW_UP], handleKeyDown, {\n    target: listRef\n  });\n\n  var handleSearchFocus = function handleSearchFocus() {\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  var getFilteredOptions = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!customFilterOptions) {\n                _context.next = 6;\n                break;\n              }\n\n              _context.next = 3;\n              return customFilterOptions(options, searchTextForFilter);\n\n            case 3:\n              _context.t0 = _context.sent;\n              _context.next = 7;\n              break;\n\n            case 6:\n              _context.t0 = filterOptions(options, searchTextForFilter);\n\n            case 7:\n              return _context.abrupt(\"return\", _context.t0);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getFilteredOptions() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var updateFocus = function updateFocus(offset) {\n    var newFocus = focusIndex + offset;\n    newFocus = Math.max(0, newFocus);\n    newFocus = Math.min(newFocus, options.length + Math.max(skipIndex - 1, 0));\n    setFocusIndex(newFocus);\n  };\n\n  useEffect(function () {\n    var _listRef$current, _listRef$current$quer;\n\n    listRef == null ? void 0 : (_listRef$current = listRef.current) == null ? void 0 : (_listRef$current$quer = _listRef$current.querySelector(\"[tabIndex='\" + focusIndex + \"']\")) == null ? void 0 : _listRef$current$quer.focus();\n  }, [focusIndex]);\n\n  var _useMemo = useMemo(function () {\n    var filteredOptionsList = filteredOptions.filter(function (o) {\n      return !o.disabled;\n    });\n    return [filteredOptionsList.every(function (o) {\n      return value.findIndex(function (v) {\n        return v.value === o.value;\n      }) !== -1;\n    }), filteredOptionsList.length !== 0]; // eslint-disable-next-line\n  }, [filteredOptions, value]),\n      _useMemo2 = _slicedToArray(_useMemo, 2),\n      isAllOptionSelected = _useMemo2[0],\n      hasSelectableOptions = _useMemo2[1];\n\n  useEffect(function () {\n    getFilteredOptions().then(setFilteredOptions);\n  }, [searchTextForFilter, options]);\n  return React.createElement(\"div\", {\n    className: \"select-panel\",\n    role: \"listbox\",\n    ref: listRef\n  }, !disableSearch && React.createElement(\"div\", {\n    className: \"search\"\n  }, React.createElement(\"input\", {\n    placeholder: t(\"search\"),\n    type: \"text\",\n    \"aria-describedby\": t(\"search\"),\n    onChange: handleSearchChange,\n    onFocus: handleSearchFocus,\n    value: searchText,\n    ref: searchInputRef,\n    tabIndex: 0\n  }), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"search-clear-button\",\n    hidden: !searchText,\n    onClick: handleClear,\n    \"aria-label\": t(\"clearSearch\")\n  }, ClearIcon || React.createElement(Cross, null))), React.createElement(\"ul\", {\n    className: \"options\"\n  }, hasSelectAll && hasSelectableOptions && React.createElement(SelectItem, {\n    tabIndex: skipIndex === 1 ? 0 : 1,\n    checked: isAllOptionSelected,\n    option: selectAllOption,\n    onSelectionChanged: selectAllChanged,\n    onClick: function onClick() {\n      return handleItemClicked(1);\n    },\n    itemRenderer: ItemRenderer,\n    disabled: disabled\n  }), filteredOptions.length ? React.createElement(SelectList, {\n    skipIndex: skipIndex,\n    options: filteredOptions,\n    onClick: function onClick(_e, index) {\n      return handleItemClicked(index);\n    }\n  }) : React.createElement(\"li\", {\n    className: \"no-options\"\n  }, t(\"noOptions\"))));\n};\n\nvar Arrow = function Arrow(_ref8) {\n  var expanded = _ref8.expanded;\n  return React.createElement(\"svg\", {\n    width: \"24\",\n    height: \"24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    className: \"dropdown-heading-dropdown-arrow gray\"\n  }, React.createElement(\"path\", {\n    d: expanded ? \"M18 15 12 9 6 15\" : \"M6 9L12 15 18 9\"\n  }));\n};\n\nvar DropdownHeader = function DropdownHeader() {\n  var _useMultiSelect3 = useMultiSelect(),\n      t = _useMultiSelect3.t,\n      value = _useMultiSelect3.value,\n      options = _useMultiSelect3.options,\n      valueRenderer = _useMultiSelect3.valueRenderer;\n\n  var noneSelected = value.length === 0;\n  var allSelected = value.length === options.length;\n  var customText = valueRenderer && valueRenderer(value, options);\n\n  var getSelectedText = function getSelectedText() {\n    return value.map(function (s) {\n      return s.label;\n    }).join(\", \");\n  };\n\n  return noneSelected ? React.createElement(\"span\", {\n    className: \"gray\"\n  }, customText || t(\"selectSomeItems\")) : React.createElement(\"span\", null, customText || (allSelected ? t(\"allItemsAreSelected\") : getSelectedText()));\n};\n\nvar Loading = function Loading(_ref9) {\n  var _ref9$size = _ref9.size,\n      size = _ref9$size === void 0 ? 24 : _ref9$size;\n  return React.createElement(\"span\", {\n    style: {\n      width: size,\n      marginRight: \"0.2rem\"\n    }\n  }, React.createElement(\"svg\", {\n    width: size,\n    height: size,\n    className: \"spinner\",\n    viewBox: \"0 0 50 50\",\n    style: {\n      display: \"inline\",\n      verticalAlign: \"middle\"\n    }\n  }, React.createElement(\"circle\", {\n    cx: \"25\",\n    cy: \"25\",\n    r: \"20\",\n    fill: \"none\",\n    className: \"path\"\n  })));\n};\n/**\r\n * A generic dropdown component.  It takes the children of the component\r\n * and hosts it in the component.  When the component is selected, it\r\n * drops-down the contentComponent and applies the contentProps.\r\n */\n\n\nvar Dropdown = function Dropdown() {\n  var _useMultiSelect4 = useMultiSelect(),\n      t = _useMultiSelect4.t,\n      onMenuToggle = _useMultiSelect4.onMenuToggle,\n      ArrowRenderer = _useMultiSelect4.ArrowRenderer,\n      shouldToggleOnHover = _useMultiSelect4.shouldToggleOnHover,\n      isLoading = _useMultiSelect4.isLoading,\n      disabled = _useMultiSelect4.disabled,\n      onChange = _useMultiSelect4.onChange,\n      labelledBy = _useMultiSelect4.labelledBy,\n      value = _useMultiSelect4.value,\n      isOpen = _useMultiSelect4.isOpen,\n      defaultIsOpen = _useMultiSelect4.defaultIsOpen,\n      ClearSelectedIcon = _useMultiSelect4.ClearSelectedIcon;\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isInternalExpand = _useState10[0],\n      setIsInternalExpand = _useState10[1];\n\n  var _useState11 = useState(defaultIsOpen),\n      _useState12 = _slicedToArray(_useState11, 2),\n      expanded = _useState12[0],\n      setExpanded = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      hasFocus = _useState14[0],\n      setHasFocus = _useState14[1];\n\n  var FinalArrow = ArrowRenderer || Arrow;\n  var wrapper = useRef();\n  useDidUpdateEffect(function () {\n    onMenuToggle && onMenuToggle(expanded);\n  }, [expanded]);\n  useEffect(function () {\n    if (defaultIsOpen === undefined && typeof isOpen === \"boolean\") {\n      setIsInternalExpand(false);\n      setExpanded(isOpen);\n    }\n  }, [isOpen]);\n\n  var handleKeyDown = function handleKeyDown(e) {\n    // allows space and enter when focused on input/button\n    if ([\"text\", \"button\"].includes(e.target.type) && [KEY.SPACE, KEY.ENTER].includes(e.code)) {\n      return;\n    }\n\n    if (isInternalExpand) {\n      if (e.code === KEY.ESCAPE) {\n        var _wrapper$current;\n\n        setExpanded(false);\n        wrapper == null ? void 0 : (_wrapper$current = wrapper.current) == null ? void 0 : _wrapper$current.focus();\n      } else {\n        setExpanded(true);\n      }\n    }\n\n    e.preventDefault();\n  };\n\n  useKey([KEY.ENTER, KEY.ARROW_DOWN, KEY.SPACE, KEY.ESCAPE], handleKeyDown, {\n    target: wrapper\n  });\n\n  var handleHover = function handleHover(iexpanded) {\n    isInternalExpand && shouldToggleOnHover && setExpanded(iexpanded);\n  };\n\n  var handleFocus = function handleFocus() {\n    return !hasFocus && setHasFocus(true);\n  };\n\n  var handleBlur = function handleBlur(e) {\n    if (!e.currentTarget.contains(e.relatedTarget) && isInternalExpand) {\n      setHasFocus(false);\n      setExpanded(false);\n    }\n  };\n\n  var handleMouseEnter = function handleMouseEnter() {\n    return handleHover(true);\n  };\n\n  var handleMouseLeave = function handleMouseLeave() {\n    return handleHover(false);\n  };\n\n  var toggleExpanded = function toggleExpanded() {\n    isInternalExpand && setExpanded(isLoading || disabled ? false : !expanded);\n  };\n\n  var handleClearSelected = function handleClearSelected(e) {\n    e.stopPropagation();\n    onChange([]);\n    isInternalExpand && setExpanded(false);\n  };\n\n  return React.createElement(\"div\", {\n    tabIndex: 0,\n    className: \"dropdown-container\",\n    \"aria-labelledby\": labelledBy,\n    \"aria-expanded\": expanded,\n    \"aria-readonly\": true,\n    \"aria-disabled\": disabled,\n    ref: wrapper,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onMouseEnter: handleMouseEnter,\n    onMouseLeave: handleMouseLeave\n  }, React.createElement(\"div\", {\n    className: \"dropdown-heading\",\n    onClick: toggleExpanded\n  }, React.createElement(\"div\", {\n    className: \"dropdown-heading-value\"\n  }, React.createElement(DropdownHeader, null)), isLoading && React.createElement(Loading, null), value.length > 0 && React.createElement(\"button\", {\n    type: \"button\",\n    className: \"clear-selected-button\",\n    onClick: handleClearSelected,\n    disabled: disabled,\n    \"aria-label\": t(\"clearSelected\")\n  }, ClearSelectedIcon || React.createElement(Cross, null)), React.createElement(FinalArrow, {\n    expanded: expanded\n  })), expanded && React.createElement(\"div\", {\n    className: \"dropdown-content\"\n  }, React.createElement(\"div\", {\n    className: \"panel-content\"\n  }, React.createElement(SelectPanel, null))));\n};\n\nvar MultiSelect = function MultiSelect(props) {\n  return React.createElement(MultiSelectProvider, {\n    props: props\n  }, React.createElement(\"div\", {\n    className: \"rmsc \" + (props.className || \"multi-select\")\n  }, React.createElement(Dropdown, null)));\n};\n\nexport default MultiSelect;\nexport { Dropdown, SelectItem, SelectPanel };","map":{"version":3,"sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/hooks/use-multi-select.tsx","../src/hooks/use-did-update-effect.tsx","../src/hooks/use-key.tsx","../src/lib/constants.tsx","../src/lib/debounce.tsx","../src/lib/fuzzy-match-utils.tsx","../src/select-panel/cross.tsx","../src/select-panel/default-item.tsx","../src/select-panel/select-item.tsx","../src/select-panel/select-list.tsx","../src/select-panel/index.tsx","../src/multi-select/arrow.tsx","../src/multi-select/header.tsx","../src/multi-select/loading.tsx","../src/multi-select/dropdown.tsx","../src/multi-select/index.tsx"],"names":["defaultStrings","allItemsAreSelected","clearSearch","clearSelected","noOptions","search","selectAll","selectSomeItems","defaultProps","value","hasSelectAll","className","debounceDuration","options","MultiSelectContext","React","MultiSelectProvider","children","t","key","props","useMultiSelect","useDidUpdateEffect","fn","inputs","didMountRef","useRef","useEffect","defaultOptions","when","eventTypes","keyList","useMemo","Array","Object","callbackRef","target","handle","useCallback","e","k","targetNode","eventType","KEY","ARROW_DOWN","ARROW_UP","ENTER","ESCAPE","SPACE","debounce","clearTimeout","timeout","setTimeout","func","filterOptions","filter","substitutions","cleanFilter","cleanUpText","label","option","score","typeaheadSimilarity","pair","b","a","aLength","bLength","table","x","y","Math","input","safeSubstitutions","unsubbed","output","Cross","width","height","fill","stroke","strokeWidth","x1","y1","x2","y2","DefaultItemRenderer","disabled","type","onChange","onClick","checked","tabIndex","SelectItem","itemRenderer","ItemRenderer","itemRef","onOptionCheck","toggleChecked","onSelectionChanged","handleClick","useKey","role","ref","SelectList","skipIndex","handleSelectionChanged","o","i","c","s","FocusType","SelectPanel","listRef","searchInputRef","useState","debouncedSearch","query","setSearchTextForFilter","start","selectAllOption","selectAllLabel","selectAllValues","filteredValues","filteredOptions","selectedValues","finalSelectedValues","selectAllChanged","newOptions","handleSearchChange","setSearchText","setFocusIndex","handleClear","handleItemClicked","index","handleKeyDown","updateFocus","handleSearchFocus","getFilteredOptions","customFilterOptions","offset","newFocus","focusIndex","filteredOptionsList","v","placeholder","onFocus","searchText","hidden","ClearIcon","isAllOptionSelected","Arrow","expanded","d","DropdownHeader","valueRenderer","noneSelected","allSelected","customText","getSelectedText","Loading","size","style","marginRight","viewBox","display","verticalAlign","cx","cy","r","Dropdown","ClearSelectedIcon","FinalArrow","ArrowRenderer","wrapper","onMenuToggle","defaultIsOpen","setIsInternalExpand","setExpanded","handleHover","iexpanded","isInternalExpand","handleFocus","setHasFocus","handleBlur","handleMouseEnter","handleMouseLeave","toggleExpanded","isLoading","handleClearSelected","labelledBy","onBlur","onMouseEnter","onMouseLeave","MultiSelect"],"mappings":";;;;;;;AAAA,SAAS,WAAT,CAAqB,GAArB,EAA0B,GAA1B,EAA+B;AAC7B,MAAK,GAAG,KAAK,KAAK,CAAlB,EAAsB,GAAG,GAAG,EAAN;AACtB,MAAI,QAAQ,GAAG,GAAG,CAAC,QAAnB;;AAEA,MAAI,CAAC,GAAD,IAAQ,OAAO,QAAP,KAAoB,WAAhC,EAA6C;AAAE;AAAS;;AAExD,MAAI,IAAI,GAAG,QAAQ,CAAC,IAAT,IAAiB,QAAQ,CAAC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAA5B;AACA,MAAI,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAZ;AACA,EAAA,KAAK,CAAC,IAAN,GAAa,UAAb;;AAEA,MAAI,QAAQ,KAAK,KAAjB,EAAwB;AACtB,QAAI,IAAI,CAAC,UAAT,EAAqB;AACnB,MAAA,IAAI,CAAC,YAAL,CAAkB,KAAlB,EAAyB,IAAI,CAAC,UAA9B;AACD,KAFD,MAEO;AACL,MAAA,IAAI,CAAC,WAAL,CAAiB,KAAjB;AACD;AACF,GAND,MAMO;AACL,IAAA,IAAI,CAAC,WAAL,CAAiB,KAAjB;AACD;;AAED,MAAI,KAAK,CAAC,UAAV,EAAsB;AACpB,IAAA,KAAK,CAAC,UAAN,CAAiB,OAAjB,GAA2B,GAA3B;AACD,GAFD,MAEO;AACL,IAAA,KAAK,CAAC,WAAN,CAAkB,QAAQ,CAAC,cAAT,CAAwB,GAAxB,CAAlB;AACD;AACH;;;;ACrBA,IAAMA,cAAc,GAAG;AACrBC,EAAAA,mBAAmB,EADE,yBAAA;AAErBC,EAAAA,WAAW,EAFU,cAAA;AAGrBC,EAAAA,aAAa,EAHQ,gBAAA;AAIrBC,EAAAA,SAAS,EAJY,YAAA;AAKrBC,EAAAA,MAAM,EALe,QAAA;AAMrBC,EAAAA,SAAS,EANY,YAAA;AAOrBC,EAAAA,eAAe,EAAE;AAPI,CAAvB;AAUA,IAAMC,YAAY,GAA0B;AAC1CC,EAAAA,KAAK,EADqC,EAAA;AAE1CC,EAAAA,YAAY,EAF8B,IAAA;AAG1CC,EAAAA,SAAS,EAHiC,cAAA;AAI1CC,EAAAA,gBAAgB,EAJ0B,GAAA;AAK1CC,EAAAA,OAAO,EAAE;AALiC,CAA5C;AAiBA,IAAMC,kBAAkB,GAAA,aAAGC,KAAK,CAALA,aAAAA,CAA3B,EAA2BA,CAA3B;;AAIO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,OAAA;AAAA,MAAC,KAAD,QAAC,KAAD;AAAA,MAEjCC,QAFiC,QAEjCA,QAFiC;;AAIjC,MAAMC,CAAC,GAAIC,SAALD,CAAKC,CAAAA,GAAD,EAAA;AAAA,QAAA,qBAAA;;AAAA,WAAS,CAAA,CAAA,qBAAA,GAAA,KAAK,CAAL,eAAA,KAAA,IAAA,GAAA,KAAA,CAAA,GAAA,qBAAA,CAAA,GAAA,CAAA,KAAgCnB,cAAc,CAAvD,GAAuD,CAAvD;AAAV,GAAA;;AAEA,SACE,KAAA,CAAA,aAAA,CAACc,kBAAkB,CAAnB,QAAA,EAAA;AAA6BL,IAAAA,KAAK;AAAIS,MAAAA,CAAF,EAAEA;AAAJ,OAAE,YAAF,GAA2BE,KAA3B;AAAlC,GAAA,EADF,QACE,CADF;AANK,CAAA;;AAaA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB;AAAA,SAAMN,KAAK,CAALA,UAAAA,CAA7B,kBAA6BA,CAAN;AAAA,CAAvB;AC9CP;;;;;;;AAKA,SAAgBO,kBAAhB,CAAmCC,EAAnC,EAAuCC,MAAvC,EAAuCA;AACrC,MAAMC,WAAW,GAAGC,MAAM,CAA1B,KAA0B,CAA1B;AAEAC,EAAAA,SAAS,CAAC,YAAA;AACR,QAAIF,WAAW,CAAf,OAAA,EAAyBF,EAAzB,GAAA,KACKE,WAAW,CAAXA,OAAAA,GAAAA,IAAAA;AAFE,GAAA,EAATE,MAAS,CAATA;AAID;ACdD;;;;;AAsBA,IAAMC,cAAc,GAAG;AACrBC,EAAAA,IAAI,EADiB,IAAA;AAErBC,EAAAA,UAAU,EAAE,CAAA,SAAA;AAFS,CAAvB;AAKA;;;;;;;;;;AASA,SAAA,MAAA,CAAA,KAAA,EAAA,QAAA,EAAA,IAAA,EAAA;AAKE,MAAMC,OAAO,GAA2BC,OAAO,CAC7C;AAAA,WAAOC,KAAK,CAALA,OAAAA,CAAAA,KAAAA,IAAAA,KAAAA,GAA+B,CADO,KACP,CAAtC;AAAA,GAD6C,EAE7C,CAFF,KAEE,CAF6C,CAA/C;AAIA,MAAMpB,OAAO,GAAGqB,MAAM,CAANA,MAAAA,CAAAA,EAAAA,EAAAA,cAAAA,EAAhB,IAAgBA,CAAhB;AATF,MAUQ,IAVR,GAUE,OAVF,CAUQ,IAVR;AAAA,MAUgBJ,UAVhB,GAUE,OAVF,CAUgBA,UAVhB;AAWE,MAAMK,WAAW,GAAGT,MAAM,CAA1B,QAA0B,CAA1B;AAXF,MAYQU,MAZR,GAYE,OAZF,CAYQA,MAZR;AAcET,EAAAA,SAAS,CAAC,YAAA;AACRQ,IAAAA,WAAW,CAAXA,OAAAA,GAAAA,QAAAA;AADFR,GAAS,CAATA;AAIA,MAAMU,MAAM,GAAGC,WAAW,CACvBC,UAAAA,CAAD,EAAA;AACE,QAAIR,OAAO,CAAPA,IAAAA,CAAcS,UAAAA,CAAD;AAAA,aAAOD,CAAC,CAADA,GAAAA,KAAAA,CAAAA,IAAeA,CAAC,CAADA,IAAAA,KAAvC,CAAiB;AAAA,KAAbR,CAAJ,EAAsD;AACpDI,MAAAA,WAAW,CAAXA,OAAAA,CAAAA,CAAAA;AACD;AAJqB,GAAA,EAMxB,CANF,OAME,CANwB,CAA1B;AASAR,EAAAA,SAAS,CAAC,YAAA;AACR,QAAIE,IAAI,IAAI,OAAA,MAAA,KAAZ,WAAA,EAA2C;AACzC,UAAMY,UAAU,GAAGL,MAAM,GAAGA,MAAM,CAAT,SAAS,CAAT,GAAzB,MAAA;AACAN,MAAAA,UAAU,CAAVA,OAAAA,CAAoBY,UAAAA,SAAD,EAAA;AACjBD,QAAAA,UAAU,IAAIA,UAAU,CAAVA,gBAAAA,CAAAA,SAAAA,EAAdA,MAAcA,CAAdA;AADFX,OAAAA;AAGA,aAAO,YAAA;AACLA,QAAAA,UAAU,CAAVA,OAAAA,CAAoBY,UAAAA,SAAD,EAAA;AACjBD,UAAAA,UAAU,IAAIA,UAAU,CAAVA,mBAAAA,CAAAA,SAAAA,EAAdA,MAAcA,CAAdA;AADFX,SAAAA;AADF,OAAA;AAKD;AAXM,GAAA,EAYN,CAAA,IAAA,EAAA,UAAA,EAAA,OAAA,EAAA,MAAA,EAZHH,QAYG,CAZM,CAATA;AAaD;;AC5EM,IAAMgB,GAAG,GAAG;AACjBC,EAAAA,UAAU,EADO,WAAA;AAEjBC,EAAAA,QAAQ,EAFS,SAAA;AAGjBC,EAAAA,KAAK,EAHY,OAAA;AAIjBC,EAAAA,MAAM,EAJW,QAAA;AAKjBC,EAAAA,KAAK,EAAE;AALU,CAAZ;;ACAA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAA,IAAA,EAAA,IAAA,EAAA;AACtB,MAAA,OAAA;AACA,SAAO,YAAA;AAAA,sCAAA,IAAA;AAAA,MAAA,IAAA;AAAA;;AACLC,IAAAA,YAAY,CAAZA,OAAY,CAAZA;AACAC,IAAAA,OAAO,GAAGC,UAAU,CAAC,YAAA;AACnBC,MAAAA,IAAI,CAAJA,KAAAA,CAAAA,IAAAA,EAAAA,IAAAA;AADkB,KAAA,EAApBF,IAAoB,CAApBA;AAFF,GAAA;AAFK,CAAA;ACSP;;;;;;;;;;;;;;;AAaA,SAAgBG,aAAhB,CACEzC,OADF,EAEE0C,MAFF,EAGEC,aAHF,EAGEA;AAEA;AACA,MAAI,CAAJ,MAAA,EAAa;AACX,WAAA,OAAA;AACD;;AAED,MAAMC,WAAW,GAAGC,WAAW,CAAA,MAAA,EAA/B,aAA+B,CAA/B;AACA,SACE,OAAO,CAAA;AAAA,GAAP,MAAA,CAEU;AAAA,QAAC,KAAD,SAAC,KAAD;AAAA,QAAUjD,KAAV,SAAUA,KAAV;AAAA,WAAsBkD,KAAK,IAALA,IAAAA,IAAiBlD,KAAK,IAFtD,IAEU;AAAA,GAFV,EAAA;AAIE;AAJF,GAAA,GAAA,CAKQmD,UAAAA,MAAD;AAAA,WAAa;AAChBA,MAAAA,MAAM,EADU,MAAA;AAEhBC,MAAAA,KAAK,EAAEC,mBAAmB,CACxBJ,WAAW,CAACE,MAAM,CAAP,KAAA,EADa,aACb,CADa,EAAA,WAAA;AAFV,KAAb;AAAA,GALP,EAAA;AAaE;AAbF,GAAA,MAAA,CAcWG,UAAAA,IAAD;AAAA,WAAUA,IAAI,CAAJA,KAAAA,IAAcN,WAAW,CAAXA,MAAAA,GAdlC,CAcU;AAAA,GAdV,EAAA;AAAA,GAAA,IAAA,CAgBQ,UAAA,CAAA,EAAA,CAAA;AAAA,WAAUO,CAAC,CAADA,KAAAA,GAAUC,CAAC,CAhB7B,KAgBQ;AAAA,GAhBR,EAAA;AAAA,GAAA,GAAA,CAkBQF,UAAAA,IAAD;AAAA,WAAUA,IAAI,CAnBvB,MAmBS;AAAA,GAlBP,CADF;AAqBD;AAED;;;;;;;;;;;;;;;;AAcA,SAAgBD,mBAAhB,CAAoCG,CAApC,EAA+CD,CAA/C,EAA+CA;AAC7C,MAAME,OAAO,GAAGD,CAAC,CAAjB,MAAA;AACA,MAAME,OAAO,GAAGH,CAAC,CAAjB,MAAA;AACA,MAAMI,KAAK,GAAX,EAAA;;AAEA,MAAI,CAAA,OAAA,IAAY,CAAhB,OAAA,EAA0B;AACxB,WAAA,CAAA;AACD,GAP4CJ,CAO5C;;;AAGD,MAAIE,OAAO,GAAX,OAAA,EAAuB;AAAA,gBACZ,CAAA,CAAA,EAAT,CAAS,CADY;AACrB,IAAA,CADqB;AACrB,IAAA,CADqB;AAEtB,GAZ4CF,CAY5C;AAGD;AACA;;;AACA,MAAIC,CAAC,CAADA,OAAAA,CAAAA,CAAAA,MAAiB,CAArB,CAAA,EAAyB;AACvB,WAAOE,OAAO,GAAG,IAAjB,OAAA;AACD,GAnB4CH,CAmB5C;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,OAAK,IAAIK,CAAC,GAAV,CAAA,EAAgBA,CAAC,IAAjB,OAAA,EAA8B,EAA9B,CAAA,EAAmC;AACjCD,IAAAA,KAAK,CAALA,CAAK,CAALA,GAAW,CAAXA,CAAW,CAAXA;AACD;;AACD,OAAK,IAAIE,CAAC,GAAV,CAAA,EAAgBA,CAAC,IAAjB,OAAA,EAA8B,EAA9B,CAAA,EAAmC;AACjCF,IAAAA,KAAK,CAALA,CAAK,CAALA,CAAAA,CAAAA,IAAAA,CAAAA;AACD,GApC4CJ,CAoC5C;;;AAGD,OAAK,IAAIK,EAAC,GAAV,CAAA,EAAgBA,EAAC,IAAjB,OAAA,EAA8B,EAA9B,EAAA,EAAmC;AACjC,SAAK,IAAIC,EAAC,GAAV,CAAA,EAAgBA,EAAC,IAAjB,OAAA,EAA8B,EAA9B,EAAA,EAAmC;AACjCF,MAAAA,KAAK,CAALA,EAAK,CAALA,CAAAA,EAAAA,IACEH,CAAC,CAACI,EAAC,GAAHJ,CAAC,CAADA,KAAaD,CAAC,CAACM,EAAC,GAAhBL,CAAc,CAAdA,GACI,IAAIG,KAAK,CAACC,EAAC,GAAPD,CAAK,CAALA,CAAaE,EAAC,GADtBL,CACQG,CADRH,GAEIM,IAAI,CAAJA,GAAAA,CAASH,KAAK,CAALA,EAAK,CAALA,CAASE,EAAC,GAAnBC,CAASH,CAATG,EAA0BH,KAAK,CAACC,EAAC,GAAPD,CAAK,CAALA,CAHhCA,EAGgCA,CAA1BG,CAHNH;AAID;AACF;;AAED,SAAOA,KAAK,CAALA,OAAK,CAALA,CAAP,OAAOA,CAAP;AACD;AAED;;;;;;;;;;;;;;;AAaA,SAAgBV,WAAhB,CACEc,KADF,EAEEhB,aAFF,EAEEA;AAEA,MAAI,CAAJ,KAAA,EAAY;AACV,WAAA,EAAA;AACD,GAJDA,CAIC;AAGD;;;AACAgB,EAAAA,KAAK,GAAGA,KAAK,CAALA,WAAAA,GAAAA,OAAAA,CAAAA,6BAAAA,EAARA,EAAQA,CAARA;;AAEA,MAAI,CAAJ,aAAA,EAAoB;AAClB,WAAA,KAAA;AACD;;AACD,MAAMC,iBAAiB,GAAvB,aAAA,CAbAjB,CAaA;AAEA;AACA;;AACA,SAAO,MAAM,CAAN,IAAA,CAAA,iBAAA,EAAA,MAAA,CAAsC,UAAA,MAAA,EAAA,YAAA,EAAA;AAC3C,QAAMkB,QAAQ,GAAG,IAAA,MAAA,CAAA,YAAA,EAAjB,GAAiB,CAAjB;AACA,WAAOC,MAAM,CAANA,OAAAA,CAAAA,QAAAA,EAAyBF,iBAAiB,CAAjD,YAAiD,CAA1CE,CAAP;AAFK,GAAA,EAAP,KAAO,CAAP;AAID;;AC3JM,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,SACnB,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACEC,IAAAA,KAAK,EAAC,IADR;AAEEC,IAAAA,MAAM,EAAC,IAFT;AAGEC,IAAAA,IAAI,EAAC,MAHP;AAIEC,IAAAA,MAAM,EAAC,cAJT;AAKEC,IAAAA,WAAW,EAAC,GALd;AAMEtE,IAAAA,SAAS,EAAC;AANZ,GAAA,EAQE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAMuE,IAAAA,EAAE,EAAC,IAAT;AAAcC,IAAAA,EAAE,EAAC,GAAjB;AAAqBC,IAAAA,EAAE,EAAC,GAAxB;AAA4BC,IAAAA,EAAE,EAAC;AAA/B,GAAA,CARF,EASE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAMH,IAAAA,EAAE,EAAC,GAAT;AAAaC,IAAAA,EAAE,EAAC,GAAhB;AAAoBC,IAAAA,EAAE,EAAC,IAAvB;AAA4BC,IAAAA,EAAE,EAAC;AAA/B,GAAA,CATF,CADmB;AAAA,CAAd;;ACSP,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB;AAAA,MAAC,OAAD,SAAC,OAAD;AAAA,MAAC,MAAD,SAAC,MAAD;AAAA,MAAC,OAAD,SAAC,OAAD;AAAA,MAI1BC,QAJ0B,SAI1BA,QAJ0B;AAAA,SAM1B,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK5E,IAAAA,SAAS,EAAA,oBAAmB4E,QAAQ,IAA3B,UAAA;AAAd,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AACEC,IAAAA,IAAI,EAAC,UADP;AAEEC,IAAAA,QAAQ,EAAEC,OAFZ;AAGEC,IAAAA,OAAO,EAAEA,OAHX;AAIEC,IAAAA,QAAQ,EAAE,CAAC,CAJb;AAKEL,IAAAA,QAAQ,EAAEA;AALZ,GAAA,CADF,EAQExE,KAAAA,CAAAA,aAAAA,CAAAA,MAAAA,EAAAA,IAAAA,EAAO6C,MAAM,CAdjB,KAcI7C,CARF,CAN0B;AAAA,CAA5B;ACXA;;;;;AAoBA,IAAM8E,UAAU,GAAG,SAAbA,UAAa,QAAA;AAAA,iCACjBC,YADiB;AAAA,MACHC,YADG,mCAAC,mBAAD;AAAA,MAAC,MAAD,SAAC,MAAD;AAAA,MAAC,OAAD,SAAC,OAAD;AAAA,MAAC,QAAD,SAAC,QAAD;AAAA,MAAC,QAAD,SAAC,QAAD;AAAA,MAAC,kBAAD,SAAC,kBAAD;AAAA,MAOjBL,OAPiB,SAOjBA,OAPiB;AASjB,MAAMM,OAAO,GAAQtE,MAArB,EAAA;;AAEA,MAAMuE,aAAa,GAAI1D,SAAjB0D,aAAiB1D,CAAAA,CAAD,EAAA;AACpB2D,IAAAA,aAAa;AACb3D,IAAAA,CAAC,CAADA,cAAAA;AAFF,GAAA;;AAKA,MAAM2D,aAAa,GAAG,SAAhBA,aAAgB,GAAA;AACpB,QAAI,CAAJ,QAAA,EAAe;AACbC,MAAAA,kBAAkB,CAAC,CAAnBA,OAAkB,CAAlBA;AACD;AAHH,GAAA;;AAMA,MAAMC,WAAW,GAAI7D,SAAf6D,WAAe7D,CAAAA,CAAD,EAAA;AAClB2D,IAAAA,aAAa;AACbR,IAAAA,OAAO,CAAPA,CAAO,CAAPA;AAFF,GAAA;;AAKAW,EAAAA,MAAM,CAAC,CAAC1D,GAAG,CAAJ,KAAA,EAAYA,GAAG,CAAhB,KAAC,CAAD,EAAA,aAAA,EAAwC;AAAEP,IAAAA,MAAM,EAAE4D;AAAV,GAAxC,CAANK;AAEA,SACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AACE1F,IAAAA,SAAS,EAAA,kBAAiBgF,OAAO,IAAxB,UAAA,CADX;AAEEW,IAAAA,IAAI,EAAC,QAFP;qBAGiBX,OAHjB;AAIEC,IAAAA,QAAQ,EAAEA,QAJZ;AAKEW,IAAAA,GAAG,EAAEP;AALP,GAAA,EAOE,KAAA,CAAA,aAAA,CAAA,YAAA,EAAA;AACEpC,IAAAA,MAAM,EAAEA,MADV;AAEE+B,IAAAA,OAAO,EAAEA,OAFX;AAGED,IAAAA,OAAO,EAAEU,WAHX;AAIEb,IAAAA,QAAQ,EAAEA;AAJZ,GAAA,CAPF,CADF;AA7BF,CAAA;ACpBA;;;;;AAeA,IAAMiB,UAAU,GAAG,SAAbA,UAAa,QAAA;AAAA,MAAC,OAAD,SAAC,OAAD;AAAA,MAAC,QAAD,SAAC,OAAD;AAAA,MAAqBC,SAArB,SAAqBA,SAArB;;AAAA,wBACmCpF,cAApD,EADiB;AAAA,MACX,QADW,mBACX,QADW;AAAA,MACX,KADW,mBACX,KADW;AAAA,MACX,QADW,mBACX,QADW;AAAA,MACkB0E,YADlB,mBACkBA,YADlB;;AAGjB,MAAMW,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAA,MAAA,EAAA,OAAA,EAAA;AAC7B,QAAA,QAAA,EAAc;AAEdjB,IAAAA,QAAQ,CACNE,OAAO,gCACH,KADG,IAAA,MAAA,KAEHlF,KAAK,CAALA,MAAAA,CAAckG,UAAAA,CAAD;AAAA,aAAYA,CAAC,CAADA,KAAAA,KAAY/C,MAAM,CAHjD6B,KAGmB;AAAA,KAAbhF,CAHE,CAARgF;AAHF,GAAA;;AAUA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,CAAA,QAAA,EAAA,IAAA,EACG,OAAO,CAAP,GAAA,CAAY,UAAA,CAAA,EAAA,CAAA,EAAA;AACX,QAAMG,QAAQ,GAAGgB,CAAC,GAAlB,SAAA;AAEA,WACE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAIzF,MAAAA,GAAG,EAAE,CAAA,CAAC,IAAD,IAAA,GAAA,KAAA,CAAA,GAAA,CAAC,CAAD,GAAA,KAAUyF;AAAnB,KAAA,EACE,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AACEhB,MAAAA,QAAQ,EAAEA,QADZ;AAEEhC,MAAAA,MAAM,EAAE+C,CAFV;AAGER,MAAAA,kBAAkB,EAAGU,4BAAAA,CAAD;AAAA,eAAOH,sBAAsB,CAAA,CAAA,EAAA,CAAA,CAA7B;AAAA,OAHtB;AAIEf,MAAAA,OAAO,EAAE,CAAC,CAAClF,KAAK,CAALA,IAAAA,CAAYqG,UAAAA,CAAD;AAAA,eAAOA,CAAC,CAADA,KAAAA,KAAYH,CAAC,CAA/BlG,KAAW;AAAA,OAAXA,CAJb;AAKEiF,MAAAA,OAAO,EAAGnD,iBAAAA,CAAD;AAAA,eAAOmD,QAAO,CAAA,CAAA,EAAA,QAAA,CAAd;AAAA,OALX;AAMEI,MAAAA,YAAY,EAAEC,YANhB;AAOER,MAAAA,QAAQ,EAAEoB,CAAC,CAADA,QAAAA,IAAcpB;AAP1B,KAAA,CADF,CADF;AALN,GAEK,CADH,CADF;AAbF,CAAA;ACfA;;;;;;;AAsBA,IAAA,SAAA;;AAAA,CAAA,UAAKwB,SAAL,EAAKA;AACHA,EAAAA,SAAAA,CAAAA,SAAAA,CAAAA,QAAAA,CAAAA,GAAAA,CAAAA,CAAAA,GAAAA,QAAAA;AACAA,EAAAA,SAAAA,CAAAA,SAAAA,CAAAA,MAAAA,CAAAA,GAAAA,CAAAA,CAAAA,CAAAA,GAAAA,MAAAA;AAFF,CAAA,EAAKA,SAAS,KAATA,SAAS,GAAd,EAAc,CAAd;;AAKA,IAAMC,WAAW,GAAG,SAAdA,WAAc,GAAA;AAAA,yBAcd3F,cAbJ,EADkB;AAAA,MACZ,CADY,oBACZ,CADY;AAAA,MACZ,QADY,oBACZ,QADY;AAAA,MACZ,OADY,oBACZ,OADY;AAAA,MACZ,KADY,oBACZ,KADY;AAAA,MACZ,mBADY,oBAMhBiC,aANgB;AAAA,MACZ,cADY,oBACZ,cADY;AAAA,MACZ,YADY,oBACZ,YADY;AAAA,MACZ,QADY,oBACZ,QADY;AAAA,MACZ,aADY,oBACZ,aADY;AAAA,MACZ,YADY,oBACZ,YADY;AAAA,MACZ,SADY,oBACZ,SADY;AAAA,MAahB1C,gBAbgB,oBAahBA,gBAbgB;;AAgBlB,MAAMqG,OAAO,GAAGvF,MAAhB,EAAA;AACA,MAAMwF,cAAc,GAAGxF,MAAvB,EAAA;;AAjBkB,kBAkBkByF,QAAQ,CAA5C,EAA4C,CAlB1B;AAAA;AAAA,MAkBZ,UAlBY;AAAA,MAkBZ,aAlBY;;AAAA,mBAmB4BA,QAAQ,CAAtD,OAAsD,CAnBpC;AAAA;AAAA,MAmBZ,eAnBY;AAAA,MAmBZ,kBAnBY;;AAAA,mBAoBoCA,QAAQ,CAA9D,EAA8D,CApB5C;AAAA;AAAA,MAoBZ,mBApBY;AAAA,MAoBZ,sBApBY;;AAAA,mBAqBkBA,QAAQ,CAA5C,CAA4C,CArB1B;AAAA;AAAA,MAqBZ,UArBY;AAAA,MAqBZ,aArBY;;AAsBlB,MAAMC,eAAe,GAAG9E,WAAW,CACjCW,QAAQ,CAAEoE,UAAAA,KAAD;AAAA,WAAWC,sBAAsB,CAAlC,KAAkC,CAAjC;AAAA,GAAD,EADyB,gBACzB,CADyB,EAAnC,EAAmC,CAAnC;AAKA,MAAMb,SAAS,GAAGzE,OAAO,CAAC,YAAA;AACxB,QAAIuF,KAAK,GAAT,CAAA;AAEA,QAAI,CAAJ,aAAA,EAAoBA,KAAK,IAALA,CAAAA,CAHI,CAGJA;;AACpB,QAAA,YAAA,EAAkBA,KAAK,IAALA,CAAAA,CAJM,CAINA;;AAElB,WAAA,KAAA;AANuB,GAAA,EAOtB,CAAA,aAAA,EAPH,YAOG,CAPsB,CAAzB;AASA,MAAMC,eAAe,GAAG;AACtB7D,IAAAA,KAAK,EAAE8D,cAAc,IAAIvG,CAAC,CADJ,WACI,CADJ;AAEtBT,IAAAA,KAAK,EAAE;AAFe,GAAxB;;AAKA,MAAMiH,eAAe,GAAI/B,SAAnB+B,eAAmB/B,CAAAA,OAAD,EAAA;AACtB,QAAMgC,cAAc,GAAGC,eAAe,CAAfA,MAAAA,CACZjB,UAAAA,CAAD;AAAA,aAAO,CAACA,CAAC,CADIiB,QACb;AAAA,KADaA,EAAAA,GAAAA,CAEfjB,UAAAA,CAAD;AAAA,aAAOA,CAAC,CAFf,KAEO;AAAA,KAFgBiB,CAAvB;;AAIA,QAAA,OAAA,EAAa;AACX,UAAMC,cAAc,GAAGpH,KAAK,CAALA,GAAAA,CAAWkG,UAAAA,CAAD;AAAA,eAAOA,CAAC,CAAzC,KAAiC;AAAA,OAAVlG,CAAvB;AACA,UAAMqH,mBAAmB,gCAAG,cAAH,sBAAzB,cAAyB,EAAzB;AAEA,aAAOF,eAAe,CAAfA,MAAAA,CAAwBjB,UAAAA,CAAD;AAAA,eAC5BmB,mBAAmB,CAAnBA,QAAAA,CAA6BnB,CAAC,CADhC,KACEmB,CAD4B;AAAA,OAAvBF,CAAP;AAGD;;AAED,WAAOnH,KAAK,CAALA,MAAAA,CAAckG,UAAAA,CAAD;AAAA,aAAO,CAACgB,cAAc,CAAdA,QAAAA,CAAwBhB,CAAC,CAArD,KAA4BgB,CAAR;AAAA,KAAblH,CAAP;AAdF,GAAA;;AAiBA,MAAMsH,gBAAgB,GAAIpC,SAApBoC,gBAAoBpC,CAAAA,OAAD,EAAA;AACvB,QAAMqC,UAAU,GAAGN,eAAe,CAAlC,OAAkC,CAAlC;AACAjC,IAAAA,QAAQ,CAARA,UAAQ,CAARA;AAFF,GAAA;;AAKA,MAAMwC,kBAAkB,GAAI1F,SAAtB0F,kBAAsB1F,CAAAA,CAAD,EAAA;AACzB6E,IAAAA,eAAe,CAAC7E,CAAC,CAADA,MAAAA,CAAhB6E,KAAe,CAAfA;AACAc,IAAAA,aAAa,CAAC3F,CAAC,CAADA,MAAAA,CAAd2F,KAAa,CAAbA;AACAC,IAAAA,aAAa,CAACpB,SAAS,CAAvBoB,MAAa,CAAbA;AAHF,GAAA;;AAMA,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAA;;;AAClBd,IAAAA,sBAAsB,CAAtBA,EAAsB,CAAtBA;AACAY,IAAAA,aAAa,CAAbA,EAAa,CAAbA;AACAhB,IAAAA,cAAc,IAAdA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,qBAAAA,GAAAA,cAAc,CAAdA,OAAAA,KAAAA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAAA,CAAAA,KAAAA,EAAAA;AAHF,GAAA;;AAMA,MAAMmB,iBAAiB,GAAIC,SAArBD,iBAAqBC,CAAAA,KAAD;AAAA,WAAmBH,aAAa,CAA1D,KAA0D,CAAhC;AAAA,GAA1B,CA3EkB,CA2ElB;;;AAGA,MAAMI,aAAa,GAAIhG,SAAjBgG,aAAiBhG,CAAAA,CAAD,EAAA;AACpB,YAAQA,CAAC,CAAT,IAAA;AACE,WAAKI,GAAG,CAAR,QAAA;AACE6F,QAAAA,WAAW,CAAC,CAAZA,CAAW,CAAXA;AACA;;AACF,WAAK7F,GAAG,CAAR,UAAA;AACE6F,QAAAA,WAAW,CAAXA,CAAW,CAAXA;AACA;;AACF;AACE;AARJ;;AAUAjG,IAAAA,CAAC,CAADA,eAAAA;AACAA,IAAAA,CAAC,CAADA,cAAAA;AAZF,GAAA;;AAeA8D,EAAAA,MAAM,CAAC,CAAC1D,GAAG,CAAJ,UAAA,EAAiBA,GAAG,CAArB,QAAC,CAAD,EAAA,aAAA,EAAgD;AACpDP,IAAAA,MAAM,EAAE6E;AAD4C,GAAhD,CAANZ;;AAIA,MAAMoC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAA;AACxBN,IAAAA,aAAa,CAACpB,SAAS,CAAvBoB,MAAa,CAAbA;AADF,GAAA;;AAIA,MAAMO,kBAAkB;AAAA,yEAAG;AAAA;AAAA;AAAA;AAAA;AAAA,mBACzBC,mBADyB;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAEfA,mBAAmB,CAAA,OAAA,EADV,mBACU,CAFJ;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,4BAGrBrF,aAAa,CAAA,OAAA,EAHnB,mBAGmB,CAHQ;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAlBoF,kBAAkB;AAAA;AAAA;AAAA,KAAxB;;AAKA,MAAMF,WAAW,GAAII,SAAfJ,WAAeI,CAAAA,MAAD,EAAA;AAClB,QAAIC,QAAQ,GAAGC,UAAU,GAAzB,MAAA;AACAD,IAAAA,QAAQ,GAAGtE,IAAI,CAAJA,GAAAA,CAAAA,CAAAA,EAAXsE,QAAWtE,CAAXsE;AACAA,IAAAA,QAAQ,GAAGtE,IAAI,CAAJA,GAAAA,CAAAA,QAAAA,EAAmB1D,OAAO,CAAPA,MAAAA,GAAiB0D,IAAI,CAAJA,GAAAA,CAASkC,SAAS,GAAlBlC,CAAAA,EAA/CsE,CAA+CtE,CAApCA,CAAXsE;AACAV,IAAAA,aAAa,CAAbA,QAAa,CAAbA;AAJF,GAAA;;AAOAxG,EAAAA,SAAS,CAAC,YAAA;;;AACRsF,IAAAA,OAAO,IAAPA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,gBAAAA,GAAAA,OAAO,CAAPA,OAAAA,KAAAA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,qBAAAA,GAAAA,gBAAAA,CAAAA,aAAAA,CAAAA,gBAAAA,UAAAA,GAAAA,IAAAA,CAAAA,KAAAA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,qBAAAA,CAAAA,KAAAA,EAAAA;AADO,GAAA,EAEN,CAFHtF,UAEG,CAFM,CAATA;;AAjHkB,iBAqHkCK,OAAO,CAAC,YAAA;AAC1D,QAAM+G,mBAAmB,GAAGnB,eAAe,CAAfA,MAAAA,CAAwBjB,UAAAA,CAAD;AAAA,aAAO,CAACA,CAAC,CAA5D,QAAmD;AAAA,KAAvBiB,CAA5B;AACA,WAAO,CACLmB,mBAAmB,CAAnBA,KAAAA,CACGpC,UAAAA,CAAD;AAAA,aAAOlG,KAAK,CAALA,SAAAA,CAAiBuI,UAAAA,CAAD;AAAA,eAAOA,CAAC,CAADA,KAAAA,KAAYrC,CAAC,CAApClG,KAAgB;AAAA,OAAhBA,MAAgD,CAFpD,CAEH;AAAA,KADFsI,CADK,EAILA,mBAAmB,CAAnBA,MAAAA,KAJF,CAAO,CAAP,CAF0D,CAE1D;AAFyD,GAAA,EASxD,CAAA,eAAA,EATH,KASG,CATwD,CArHzC;AAAA;AAAA,MAqHZ,mBArHY;AAAA,MAqHZ,oBArHY;;AAgIlBpH,EAAAA,SAAS,CAAC,YAAA;AACR+G,IAAAA,kBAAkB,GAAlBA,IAAAA,CAAAA,kBAAAA;AADO,GAAA,EAEN,CAAA,mBAAA,EAFH/G,OAEG,CAFM,CAATA;AAIA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKhB,IAAAA,SAAS,EAAC,cAAf;AAA8B2F,IAAAA,IAAI,EAAC,SAAnC;AAA6CC,IAAAA,GAAG,EAAEU;AAAlD,GAAA,EACG,CAAA,aAAA,IACC,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKtG,IAAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,OAAA,EAAA;AACEsI,IAAAA,WAAW,EAAE/H,CAAC,CAAA,QAAA,CADhB;AAEEsE,IAAAA,IAAI,EAAC,MAFP;wBAGoBtE,CAAC,CAAA,QAAA,CAHrB;AAIEuE,IAAAA,QAAQ,EAAEwC,kBAJZ;AAKEiB,IAAAA,OAAO,EAAET,iBALX;AAMEhI,IAAAA,KAAK,EAAE0I,UANT;AAOE5C,IAAAA,GAAG,EAAEW,cAPP;AAQEtB,IAAAA,QAAQ,EAAE;AARZ,GAAA,CADF,EAWE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACEJ,IAAAA,IAAI,EAAC,QADP;AAEE7E,IAAAA,SAAS,EAAC,qBAFZ;AAGEyI,IAAAA,MAAM,EAAE,CAACD,UAHX;AAIEzD,IAAAA,OAAO,EAAE0C,WAJX;kBAKclH,CAAC,CAAA,aAAA;AALf,GAAA,EAOGmI,SAAS,IAAItI,KAAAA,CAAAA,aAAAA,CAAAA,KAAAA,EApBtB,IAoBsBA,CAPhB,CAXF,CAFJ,EAyBE,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAIJ,IAAAA,SAAS,EAAC;AAAd,GAAA,EACGD,YAAY,IAAZA,oBAAAA,IACC,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AACEkF,IAAAA,QAAQ,EAAEa,SAAS,KAATA,CAAAA,GAAAA,CAAAA,GAAsB,CADlC;AAEEd,IAAAA,OAAO,EAAE2D,mBAFX;AAGE1F,IAAAA,MAAM,EAAE4D,eAHV;AAIErB,IAAAA,kBAAkB,EAAE4B,gBAJtB;AAKErC,IAAAA,OAAO,EAAE;AAAA,aAAM2C,iBAAiB,CAAA,CAAA,CAAvB;AAAA,KALX;AAMEvC,IAAAA,YAAY,EAAEC,YANhB;AAOER,IAAAA,QAAQ,EAAEA;AAPZ,GAAA,CAFJ,EAaG,eAAe,CAAf,MAAA,GACC,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AACEkB,IAAAA,SAAS,EAAEA,SADb;AAEE5F,IAAAA,OAAO,EAAE+G,eAFX;AAGElC,IAAAA,OAAO,EAAE,iBAAA,EAAA,EAAA,KAAA;AAAA,aAAe2C,iBAAiB,CAAA,KAAA,CAAhC;AAAA;AAHX,GAAA,CADD,GAOC,KAAA,CAAA,aAAA,CAAA,IAAA,EAAA;AAAI1H,IAAAA,SAAS,EAAC;AAAd,GAAA,EAA4BO,CAAC,CA9CrC,WA8CqC,CAA7B,CApBJ,CAzBF,CADF;AApIF,CAAA;;ACzBO,IAAMqI,KAAK,GAAG,SAARA,KAAQ;AAAA,MAAGC,QAAH,SAAGA,QAAH;AAAA,SACnB,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE3E,IAAAA,KAAK,EAAC,IADR;AAEEC,IAAAA,MAAM,EAAC,IAFT;AAGEC,IAAAA,IAAI,EAAC,MAHP;AAIEC,IAAAA,MAAM,EAAC,cAJT;AAKEC,IAAAA,WAAW,EAAC,GALd;AAMEtE,IAAAA,SAAS,EAAC;AANZ,GAAA,EAQE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAM8I,IAAAA,CAAC,EAAED,QAAQ,GAAA,kBAAA,GAAwB;AAAzC,GAAA,CARF,CADmB;AAAA,CAAd;;ACEA,IAAME,cAAc,GAAG,SAAjBA,cAAiB,GAAA;AAAA,yBACiBrI,cAA7C,EAD4B;AAAA,MACtB,CADsB,oBACtB,CADsB;AAAA,MACtB,KADsB,oBACtB,KADsB;AAAA,MACtB,OADsB,oBACtB,OADsB;AAAA,MACDsI,aADC,oBACDA,aADC;;AAG5B,MAAMC,YAAY,GAAGnJ,KAAK,CAALA,MAAAA,KAArB,CAAA;AACA,MAAMoJ,WAAW,GAAGpJ,KAAK,CAALA,MAAAA,KAAiBI,OAAO,CAA5C,MAAA;AACA,MAAMiJ,UAAU,GAAGH,aAAa,IAAIA,aAAa,CAAA,KAAA,EAAjD,OAAiD,CAAjD;;AAEA,MAAMI,eAAe,GAAG,SAAlBA,eAAkB;AAAA,WAAMtJ,KAAK,CAALA,GAAAA,CAAWqG,UAAAA,CAAD;AAAA,aAAOA,CAAC,CAAlBrG,KAAU;AAAA,KAAVA,EAAAA,IAAAA,CAA9B,IAA8BA,CAAN;AAAA,GAAxB;;AAEA,SAAOmJ,YAAY,GACjB,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AAAMjJ,IAAAA,SAAS,EAAC;AAAhB,GAAA,EAAwBmJ,UAAU,IAAI5I,CAAC,CADtB,iBACsB,CAAvC,CADiB,GAGjBH,KAAAA,CAAAA,aAAAA,CAAAA,MAAAA,EAAAA,IAAAA,EACG+I,UAAU,KACRD,WAAW,GAAG3I,CAAC,CAAJ,qBAAI,CAAJ,GAA8B6I,eALhD,EAIe,CADbhJ,CAHF;AATK,CAAA;;ACFA,IAAMiJ,OAAO,GAAG,SAAVA,OAAU;AAAA,yBAAGC,IAAH;AAAA,MAAGA,IAAH,2BAAU,EAAV;AAAA,SACrB,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA;AACEC,IAAAA,KAAK,EAAE;AACLrF,MAAAA,KAAK,EADA,IAAA;AAELsF,MAAAA,WAAW,EAAE;AAFR;AADT,GAAA,EAME,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACEtF,IAAAA,KAAK,EAAEoF,IADT;AAEEnF,IAAAA,MAAM,EAAEmF,IAFV;AAGEtJ,IAAAA,SAAS,EAAC,SAHZ;AAIEyJ,IAAAA,OAAO,EAAC,WAJV;AAKEF,IAAAA,KAAK,EAAE;AAAEG,MAAAA,OAAO,EAAT,QAAA;AAAqBC,MAAAA,aAAa,EAAE;AAApC;AALT,GAAA,EAOE,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AAAQC,IAAAA,EAAE,EAAC,IAAX;AAAgBC,IAAAA,EAAE,EAAC,IAAnB;AAAwBC,IAAAA,CAAC,EAAC,IAA1B;AAA+B1F,IAAAA,IAAI,EAAC,MAApC;AAA2CpE,IAAAA,SAAS,EAAC;AAArD,GAAA,CAPF,CANF,CADqB;AAAA,CAAhB;ACFP;;;;;;;AAiBA,IAAM+J,QAAQ,GAAG,SAAXA,QAAW,GAAA;AAAA,yBAcXrJ,cAbJ,EADe;AAAA,MACT,CADS,oBACT,CADS;AAAA,MACT,YADS,oBACT,YADS;AAAA,MACT,aADS,oBACT,aADS;AAAA,MACT,mBADS,oBACT,mBADS;AAAA,MACT,SADS,oBACT,SADS;AAAA,MACT,QADS,oBACT,QADS;AAAA,MACT,QADS,oBACT,QADS;AAAA,MACT,UADS,oBACT,UADS;AAAA,MACT,KADS,oBACT,KADS;AAAA,MACT,MADS,oBACT,MADS;AAAA,MACT,aADS,oBACT,aADS;AAAA,MAabsJ,iBAba,oBAabA,iBAba;;AAAA,mBAgBiCxD,QAAQ,CAAxD,IAAwD,CAhBzC;AAAA;AAAA,MAgBT,gBAhBS;AAAA,MAgBT,mBAhBS;;AAAA,oBAiBiBA,QAAQ,CAAxC,aAAwC,CAjBzB;AAAA;AAAA,MAiBT,QAjBS;AAAA,MAiBT,WAjBS;;AAAA,oBAkBiBA,QAAQ,CAAxC,KAAwC,CAlBzB;AAAA;AAAA,MAkBT,QAlBS;AAAA,MAkBT,WAlBS;;AAmBf,MAAMyD,UAAU,GAAGC,aAAa,IAAhC,KAAA;AAEA,MAAMC,OAAO,GAAQpJ,MAArB,EAAA;AAEAJ,EAAAA,kBAAkB,CAAC,YAAA;AACjByJ,IAAAA,YAAY,IAAIA,YAAY,CAA5BA,QAA4B,CAA5BA;AADgB,GAAA,EAEf,CAFHzJ,QAEG,CAFe,CAAlBA;AAIAK,EAAAA,SAAS,CAAC,YAAA;AACR,QAAIqJ,aAAa,KAAbA,SAAAA,IAA+B,OAAA,MAAA,KAAnC,SAAA,EAAgE;AAC9DC,MAAAA,mBAAmB,CAAnBA,KAAmB,CAAnBA;AACAC,MAAAA,WAAW,CAAXA,MAAW,CAAXA;AACD;AAJM,GAAA,EAKN,CALHvJ,MAKG,CALM,CAATA;;AAOA,MAAM4G,aAAa,GAAIhG,SAAjBgG,aAAiBhG,CAAAA,CAAD,EAAA;AACpB;AACA,QACE,CAAA,MAAA,EAAA,QAAA,EAAA,QAAA,CAA4BA,CAAC,CAADA,MAAAA,CAA5B,IAAA,KACA,CAACI,GAAG,CAAJ,KAAA,EAAYA,GAAG,CAAf,KAAA,EAAA,QAAA,CAAgCJ,CAAC,CAFnC,IAEE,CAFF,EAGE;AACA;AACD;;AAED,QAAA,gBAAA,EAAsB;AACpB,UAAIA,CAAC,CAADA,IAAAA,KAAWI,GAAG,CAAlB,MAAA,EAA2B;AAAA,YAAA,gBAAA;;AACzBuI,QAAAA,WAAW,CAAXA,KAAW,CAAXA;AACAJ,QAAAA,OAAO,IAAPA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,CAAAA,gBAAAA,GAAAA,OAAO,CAAPA,OAAAA,KAAAA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,gBAAAA,CAAAA,KAAAA,EAAAA;AAFF,OAAA,MAGO;AACLI,QAAAA,WAAW,CAAXA,IAAW,CAAXA;AACD;AACF;;AACD3I,IAAAA,CAAC,CAADA,cAAAA;AAjBF,GAAA;;AAoBA8D,EAAAA,MAAM,CAAC,CAAC1D,GAAG,CAAJ,KAAA,EAAYA,GAAG,CAAf,UAAA,EAA4BA,GAAG,CAA/B,KAAA,EAAuCA,GAAG,CAA3C,MAAC,CAAD,EAAA,aAAA,EAAoE;AACxEP,IAAAA,MAAM,EAAE0I;AADgE,GAApE,CAANzE;;AAIA,MAAM8E,WAAW,GAAIC,SAAfD,WAAeC,CAAAA,SAAD,EAAA;AAClBC,IAAAA,gBAAgB,IAAhBA,mBAAAA,IAA2CH,WAAW,CAAtDG,SAAsD,CAAtDA;AADF,GAAA;;AAIA,MAAMC,WAAW,GAAG,SAAdA,WAAc;AAAA,WAAM,CAAA,QAAA,IAAaC,WAAW,CAAlD,IAAkD,CAA9B;AAAA,GAApB;;AAEA,MAAMC,UAAU,GAAIjJ,SAAdiJ,UAAcjJ,CAAAA,CAAD,EAAA;AACjB,QAAI,CAACA,CAAC,CAADA,aAAAA,CAAAA,QAAAA,CAAyBA,CAAC,CAA3B,aAACA,CAAD,IAAJ,gBAAA,EAAoE;AAClEgJ,MAAAA,WAAW,CAAXA,KAAW,CAAXA;AACAL,MAAAA,WAAW,CAAXA,KAAW,CAAXA;AACD;AAJH,GAAA;;AAOA,MAAMO,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA,WAAMN,WAAW,CAA1C,IAA0C,CAAjB;AAAA,GAAzB;;AAEA,MAAMO,gBAAgB,GAAG,SAAnBA,gBAAmB;AAAA,WAAMP,WAAW,CAA1C,KAA0C,CAAjB;AAAA,GAAzB;;AAEA,MAAMQ,cAAc,GAAG,SAAjBA,cAAiB,GAAA;AACrBN,IAAAA,gBAAgB,IAAIH,WAAW,CAACU,SAAS,IAATA,QAAAA,GAAAA,KAAAA,GAAgC,CAAhEP,QAA+B,CAA/BA;AADF,GAAA;;AAIA,MAAMQ,mBAAmB,GAAItJ,SAAvBsJ,mBAAuBtJ,CAAAA,CAAD,EAAA;AAC1BA,IAAAA,CAAC,CAADA,eAAAA;AACAkD,IAAAA,QAAQ,CAARA,EAAQ,CAARA;AACA4F,IAAAA,gBAAgB,IAAIH,WAAW,CAA/BG,KAA+B,CAA/BA;AAHF,GAAA;;AAMA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACEzF,IAAAA,QAAQ,EAAE,CADZ;AAEEjF,IAAAA,SAAS,EAAC,oBAFZ;uBAGmBmL,UAHnB;qBAIiBtC,QAJjB;qBAKiB,IALjB;qBAMiBjE,QANjB;AAOEgB,IAAAA,GAAG,EAAEuE,OAPP;AAQE5B,IAAAA,OAAO,EAAEoC,WARX;AASES,IAAAA,MAAM,EAAEP,UATV;AAUEQ,IAAAA,YAAY,EAAEP,gBAVhB;AAWEQ,IAAAA,YAAY,EAAEP;AAXhB,GAAA,EAaE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK/K,IAAAA,SAAS,EAAC,kBAAf;AAAkC+E,IAAAA,OAAO,EAAEiG;AAA3C,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKhL,IAAAA,SAAS,EAAC;AAAf,GAAA,EACEI,KAAAA,CAAAA,aAAAA,CAAAA,cAAAA,EAFJ,IAEIA,CADF,CADF,EAIG6K,SAAS,IAAI7K,KAAAA,CAAAA,aAAAA,CAAAA,OAAAA,EAJhB,IAIgBA,CAJhB,EAKGN,KAAK,CAALA,MAAAA,GAAAA,CAAAA,IACC,KAAA,CAAA,aAAA,CAAA,QAAA,EAAA;AACE+E,IAAAA,IAAI,EAAC,QADP;AAEE7E,IAAAA,SAAS,EAAC,uBAFZ;AAGE+E,IAAAA,OAAO,EAAEmG,mBAHX;AAIEtG,IAAAA,QAAQ,EAAEA,QAJZ;kBAKcrE,CAAC,CAAA,eAAA;AALf,GAAA,EAOGyJ,iBAAiB,IAAI5J,KAAAA,CAAAA,aAAAA,CAAAA,KAAAA,EAb5B,IAa4BA,CAPxB,CANJ,EAgBE,KAAA,CAAA,aAAA,CAAA,UAAA,EAAA;AAAYyI,IAAAA,QAAQ,EAAEA;AAAtB,GAAA,CAhBF,CAbF,EA+BGA,QAAQ,IACP,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAK7I,IAAAA,SAAS,EAAC;AAAf,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKA,IAAAA,SAAS,EAAC;AAAf,GAAA,EACEI,KAAAA,CAAAA,aAAAA,CAAAA,WAAAA,EAnCV,IAmCUA,CADF,CADF,CAhCJ,CADF;AArFF,CAAA;;ACTA,IAAMmL,WAAW,GAAI9K,SAAf8K,WAAe9K,CAAAA,KAAD;AAAA,SAClB,KAAA,CAAA,aAAA,CAAA,mBAAA,EAAA;AAAqBA,IAAAA,KAAK,EAAEA;AAA5B,GAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AAAKT,IAAAA,SAAS,EAAA,WAAUS,KAAK,CAALA,SAAAA,IAAV,cAAA;AAAd,GAAA,EACEL,KAAAA,CAAAA,aAAAA,CAAAA,QAAAA,EAHN,IAGMA,CADF,CADF,CADkB;AAAA,CAApB","sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from \"react\";\n\nimport { ISelectProps, Option } from \"../lib/interfaces\";\n\nconst defaultStrings = {\n  allItemsAreSelected: \"All items are selected.\",\n  clearSearch: \"Clear Search\",\n  clearSelected: \"Clear Selected\",\n  noOptions: \"No options\",\n  search: \"Search\",\n  selectAll: \"Select All\",\n  selectSomeItems: \"Select...\",\n};\n\nconst defaultProps: Partial<ISelectProps> = {\n  value: [],\n  hasSelectAll: true,\n  className: \"multi-select\",\n  debounceDuration: 200,\n  options: [] as Option[],\n};\n\ninterface MultiSelectContextProps extends ISelectProps {\n  t: (key: string) => string;\n}\n\ninterface MultiSelectProviderProps {\n  props: ISelectProps;\n  children;\n}\n\nconst MultiSelectContext = React.createContext<MultiSelectContextProps>(\n  {} as MultiSelectContextProps\n);\n\nexport const MultiSelectProvider = ({\n  props,\n  children,\n}: MultiSelectProviderProps) => {\n  const t = (key) => props.overrideStrings?.[key] || defaultStrings[key];\n\n  return (\n    <MultiSelectContext.Provider value={{ t, ...defaultProps, ...props }}>\n      {children}\n    </MultiSelectContext.Provider>\n  );\n};\n\nexport const useMultiSelect = () => React.useContext(MultiSelectContext);\n","import { useEffect, useRef } from \"react\";\n\n/**\n * similar to `useEffect` but gets triggered only when value changes\n * @param fn executable function on dependency updates\n * @param inputs dependency array\n */\nexport function useDidUpdateEffect(fn, inputs) {\n  const didMountRef = useRef(false);\n\n  useEffect(() => {\n    if (didMountRef.current) fn();\n    else didMountRef.current = true;\n  }, inputs);\n}\n","/*\n * copied from https://github.com/imbhargav5/rooks/blob/master/packages/shared/useKeyRef.ts\n */\n\nimport { Ref, useEffect, useCallback, useRef, useMemo } from \"react\";\n\ninterface Options {\n  /**\n   * Condition which if true, will enable the event listeners\n   */\n  when?: boolean;\n  /**\n   * Keyboardevent types to listen for. Valid options are keyDown, keyPress and keyUp\n   */\n  eventTypes?: Array<string | number>;\n  /**\n   * target ref on which the events should be listened. If no target is specified,\n   * events are listened to on the window\n   */\n  target?: Ref<HTMLElement> | null;\n}\n\nconst defaultOptions = {\n  when: true,\n  eventTypes: [\"keydown\"],\n};\n\n/**\n * useKey hook\n *\n * Fires a callback on keyboard events like keyDown, keyPress and keyUp\n *\n * @param {[string|number]} keyList\n * @param {function} callback\n * @param {Options} options\n */\nfunction useKey(\n  input: string | number | Array<string | number>,\n  callback: (e: KeyboardEvent) => any,\n  opts?: Options\n): void {\n  const keyList: Array<string | number> = useMemo(\n    () => (Array.isArray(input) ? input : [input]),\n    [input]\n  );\n  const options = Object.assign({}, defaultOptions, opts);\n  const { when, eventTypes } = options;\n  const callbackRef = useRef<(e: KeyboardEvent) => any>(callback);\n  let { target } = options;\n\n  useEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  const handle = useCallback(\n    (e: KeyboardEvent) => {\n      if (keyList.some((k) => e.key === k || e.code === k)) {\n        callbackRef.current(e);\n      }\n    },\n    [keyList]\n  );\n\n  useEffect((): any => {\n    if (when && typeof window !== \"undefined\") {\n      const targetNode = target ? target[\"current\"] : window;\n      eventTypes.forEach((eventType) => {\n        targetNode && targetNode.addEventListener(eventType, handle);\n      });\n      return () => {\n        eventTypes.forEach((eventType) => {\n          targetNode && targetNode.removeEventListener(eventType, handle);\n        });\n      };\n    }\n  }, [when, eventTypes, keyList, target, callback]);\n}\n\nexport { useKey };\n","export const KEY = {\n  ARROW_DOWN: \"ArrowDown\",\n  ARROW_UP: \"ArrowUp\",\n  ENTER: \"Enter\",\n  ESCAPE: \"Escape\",\n  SPACE: \"Space\",\n};\n","export const debounce = (func, wait) => {\n  let timeout;\n  return function (...args) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      func.apply(null, args);\n    }, wait);\n  };\n};\n","import { Option } from \"./interfaces\";\n\n/**\n * A collection of string matching algorithms built with React Select in mind.\n */\n\n// Option type from React Select and similar libraries.\ntype MapOfStrings = { [key: string]: string };\n\n/**\n * Filters React Select options and sorts by similarity to a search filter.\n * Handles partial matches, eg. searching for \"Waberg High\" will find \"Raoul\n * Wallenberg Traditional High School\". Case insensitive. Ignores\n * non-alphanumeric characters.\n *\n * @param  options  An unfiltered list of Options.\n * @param? filter  A string to compare against Option labels.\n * @param? substitutions  Strings with multiple spellings or variations that we\n *           expect to match, eg. accented characters or abbreviated words.\n *\n * @return A filtered and sorted array of Options.\n */\nexport function filterOptions(\n  options: Option[],\n  filter?: string,\n  substitutions?: MapOfStrings\n): Option[] {\n  // If the filter is blank, return the full list of Options.\n  if (!filter) {\n    return options;\n  }\n\n  const cleanFilter = cleanUpText(filter, substitutions);\n  return (\n    options\n      // Filter out undefined or null Options.\n      .filter(({ label, value }) => label != null && value != null)\n      // Create a {score, Option} pair for each Option based on its label's\n      // similarity to the filter text.\n      .map((option) => ({\n        option: option,\n        score: typeaheadSimilarity(\n          cleanUpText(option.label, substitutions),\n          cleanFilter\n        ),\n      }))\n      // Only include matches of the entire substring, with a slight\n      // affordance for transposition or extra characters.\n      .filter((pair) => pair.score >= cleanFilter.length - 2)\n      // Sort 'em by order of their score.\n      .sort((a, b) => b.score - a.score)\n      // …and grab the original Options back from their pairs.\n      .map((pair) => pair.option)\n  );\n}\n\n/**\n * Scores the similarity between two strings by returning the length of the\n * longest common subsequence. Intended for comparing strings of different\n * lengths; eg. when matching a typeahead search input with a school name.\n\n * Meant for use in an instant search box where results are being fetched\n * as a user is typing.\n *\n * @param  a  The longer string (though, we flip them if it's shorter).\n * @param  b  The shorter string, eg. a typeahead search input.\n *\n * @return The length of the longest common subsequence. Higher scores indicate\n *           closer matches.\n */\nexport function typeaheadSimilarity(a: string, b: string): number {\n  const aLength = a.length;\n  const bLength = b.length;\n  const table: any[] = [];\n\n  if (!aLength || !bLength) {\n    return 0;\n  }\n\n  // Ensure `a` isn't shorter than `b`.\n  if (aLength < bLength) {\n    [a, b] = [b, a];\n  }\n\n  // Early exit if `a` includes `b`; these will be scored higher than any\n  // other options with the same `b` (filter string), with a preference for\n  // shorter `a` strings (option labels).\n  if (a.indexOf(b) !== -1) {\n    return bLength + 1 / aLength;\n  }\n\n  // Initialize the table axes:\n  //\n  //    0 0 0 0 ... bLength\n  //    0\n  //    0\n  //\n  //   ...\n  //\n  // aLength\n  //\n  for (let x = 0; x <= aLength; ++x) {\n    table[x] = [0];\n  }\n  for (let y = 0; y <= bLength; ++y) {\n    table[0][y] = 0;\n  }\n\n  // Populate the rest of the table with a dynamic programming algorithm.\n  for (let x = 1; x <= aLength; ++x) {\n    for (let y = 1; y <= bLength; ++y) {\n      table[x][y] =\n        a[x - 1] === b[y - 1]\n          ? 1 + table[x - 1][y - 1]\n          : Math.max(table[x][y - 1], table[x - 1][y]);\n    }\n  }\n\n  return table[aLength][bLength];\n}\n\n/**\n * Apply string substitutions, remove non-alphanumeric characters, and convert\n * all letters to uppercase.\n *\n * eg. 'Scoil Bhríde Primary School' may become 'SCOILBHRIDEPRIMARYSCHOOL'.\n *\n * @param  input  An unsanitized input string.\n * @param  substitutions  Strings with multiple spellings or variations that we\n *          expect to match, for example accented characters or abbreviated\n *          words.\n *\n * @return The sanitized text.\n */\nexport function cleanUpText(\n  input?: string,\n  substitutions?: MapOfStrings\n): string {\n  if (!input) {\n    return \"\";\n  }\n\n  // Uppercase and remove all non-alphanumeric, non-accented characters.\n  // Also remove underscores.\n  input = input.toUpperCase().replace(/((?=[^\\u00E0-\\u00FC])\\W)|_/g, \"\");\n\n  if (!substitutions) {\n    return input;\n  }\n  const safeSubstitutions: MapOfStrings = substitutions; // For Flow.\n\n  // Replace all strings in `safeSubstitutions` with their standardized\n  // counterparts.\n  return Object.keys(safeSubstitutions).reduce((output, substitution) => {\n    const unsubbed = new RegExp(substitution, \"g\");\n    return output.replace(unsubbed, safeSubstitutions[substitution]);\n  }, input);\n}\n","import React from \"react\";\n\nexport const Cross = () => (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    className=\"dropdown-search-clear-icon gray\"\n  >\n    <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n    <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n  </svg>\n);\n","import React from \"react\";\n\nimport { Option } from \"../lib/interfaces\";\n\ninterface IDefaultItemRendererProps {\n  checked: boolean;\n  option: Option;\n  disabled?: boolean;\n  onClick;\n}\n\nconst DefaultItemRenderer = ({\n  checked,\n  option,\n  onClick,\n  disabled,\n}: IDefaultItemRendererProps) => (\n  <div className={`item-renderer ${disabled && \"disabled\"}`}>\n    <input\n      type=\"checkbox\"\n      onChange={onClick}\n      checked={checked}\n      tabIndex={-1}\n      disabled={disabled}\n    />\n    <span>{option.label}</span>\n  </div>\n);\n\nexport default DefaultItemRenderer;\n","/**\n * This component represents an individual item in the multi-select drop-down\n */\nimport React, { useRef } from \"react\";\n\nimport { useKey } from \"../hooks/use-key\";\nimport { KEY } from \"../lib/constants\";\nimport { Option } from \"../lib/interfaces\";\nimport DefaultItemRenderer from \"./default-item\";\n\ninterface ISelectItemProps {\n  itemRenderer;\n  option: Option;\n  checked?: boolean;\n  tabIndex?: number;\n  disabled?: boolean;\n  onSelectionChanged: (checked: boolean) => void;\n  onClick;\n}\n\nconst SelectItem = ({\n  itemRenderer: ItemRenderer = DefaultItemRenderer,\n  option,\n  checked,\n  tabIndex,\n  disabled,\n  onSelectionChanged,\n  onClick,\n}: ISelectItemProps) => {\n  const itemRef: any = useRef();\n\n  const onOptionCheck = (e) => {\n    toggleChecked();\n    e.preventDefault();\n  };\n\n  const toggleChecked = () => {\n    if (!disabled) {\n      onSelectionChanged(!checked);\n    }\n  };\n\n  const handleClick = (e) => {\n    toggleChecked();\n    onClick(e);\n  };\n\n  useKey([KEY.ENTER, KEY.SPACE], onOptionCheck, { target: itemRef });\n\n  return (\n    <label\n      className={`select-item ${checked && \"selected\"}`}\n      role=\"option\"\n      aria-selected={checked}\n      tabIndex={tabIndex}\n      ref={itemRef}\n    >\n      <ItemRenderer\n        option={option}\n        checked={checked}\n        onClick={handleClick}\n        disabled={disabled}\n      />\n    </label>\n  );\n};\n\nexport default SelectItem;\n","/**\n * This component represents an unadorned list of SelectItem (s).\n */\nimport React from \"react\";\n\nimport { useMultiSelect } from \"../hooks/use-multi-select\";\nimport { Option } from \"../lib/interfaces\";\nimport SelectItem from \"./select-item\";\n\ninterface ISelectListProps {\n  options: Option[];\n  onClick: Function;\n  skipIndex: number;\n}\n\nconst SelectList = ({ options, onClick, skipIndex }: ISelectListProps) => {\n  const { disabled, value, onChange, ItemRenderer } = useMultiSelect();\n\n  const handleSelectionChanged = (option: Option, checked: boolean) => {\n    if (disabled) return;\n\n    onChange(\n      checked\n        ? [...value, option]\n        : value.filter((o: any) => o.value !== option.value)\n    );\n  };\n\n  return (\n    <>\n      {options.map((o: any, i) => {\n        const tabIndex = i + skipIndex;\n\n        return (\n          <li key={o?.key || i}>\n            <SelectItem\n              tabIndex={tabIndex}\n              option={o}\n              onSelectionChanged={(c) => handleSelectionChanged(o, c)}\n              checked={!!value.find((s) => s.value === o.value)}\n              onClick={(e) => onClick(e, tabIndex)}\n              itemRenderer={ItemRenderer}\n              disabled={o.disabled || disabled}\n            />\n          </li>\n        );\n      })}\n    </>\n  );\n};\n\nexport default SelectList;\n","/**\n * This component represents the entire panel which gets dropped down when the\n * user selects the component.  It encapsulates the search filter, the\n * Select-all item, and the list of options.\n */\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\n\nimport { useKey } from \"../hooks/use-key\";\nimport { useMultiSelect } from \"../hooks/use-multi-select\";\nimport { KEY } from \"../lib/constants\";\nimport { debounce } from \"../lib/debounce\";\nimport { filterOptions } from \"../lib/fuzzy-match-utils\";\nimport { Cross } from \"./cross\";\nimport SelectItem from \"./select-item\";\nimport SelectList from \"./select-list\";\n\nenum FocusType {\n  SEARCH = 0,\n  NONE = -1,\n}\n\nconst SelectPanel = () => {\n  const {\n    t,\n    onChange,\n    options,\n    value,\n    filterOptions: customFilterOptions,\n    selectAllLabel,\n    ItemRenderer,\n    disabled,\n    disableSearch,\n    hasSelectAll,\n    ClearIcon,\n    debounceDuration,\n  } = useMultiSelect();\n\n  const listRef = useRef<any>();\n  const searchInputRef = useRef<any>();\n  const [searchText, setSearchText] = useState(\"\");\n  const [filteredOptions, setFilteredOptions] = useState(options);\n  const [searchTextForFilter, setSearchTextForFilter] = useState(\"\");\n  const [focusIndex, setFocusIndex] = useState(0);\n  const debouncedSearch = useCallback(\n    debounce((query) => setSearchTextForFilter(query), debounceDuration),\n    []\n  );\n\n  const skipIndex = useMemo(() => {\n    let start = 0;\n\n    if (!disableSearch) start += 1; // if search is enabled then +1 to skipIndex\n    if (hasSelectAll) start += 1; // if select-all is enabled then +1 to skipIndex\n\n    return start;\n  }, [disableSearch, hasSelectAll]);\n\n  const selectAllOption = {\n    label: selectAllLabel || t(\"selectAll\"),\n    value: \"\",\n  };\n\n  const selectAllValues = (checked) => {\n    const filteredValues = filteredOptions\n      .filter((o) => !o.disabled)\n      .map((o) => o.value);\n\n    if (checked) {\n      const selectedValues = value.map((o) => o.value);\n      const finalSelectedValues = [...selectedValues, ...filteredValues];\n\n      return filteredOptions.filter((o) =>\n        finalSelectedValues.includes(o.value)\n      );\n    }\n\n    return value.filter((o) => !filteredValues.includes(o.value));\n  };\n\n  const selectAllChanged = (checked: boolean) => {\n    const newOptions = selectAllValues(checked);\n    onChange(newOptions);\n  };\n\n  const handleSearchChange = (e) => {\n    debouncedSearch(e.target.value);\n    setSearchText(e.target.value);\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  const handleClear = () => {\n    setSearchTextForFilter(\"\");\n    setSearchText(\"\");\n    searchInputRef?.current?.focus();\n  };\n\n  const handleItemClicked = (index: number) => setFocusIndex(index);\n\n  // Arrow Key Navigation\n  const handleKeyDown = (e) => {\n    switch (e.code) {\n      case KEY.ARROW_UP:\n        updateFocus(-1);\n        break;\n      case KEY.ARROW_DOWN:\n        updateFocus(1);\n        break;\n      default:\n        return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  useKey([KEY.ARROW_DOWN, KEY.ARROW_UP], handleKeyDown, {\n    target: listRef,\n  });\n\n  const handleSearchFocus = () => {\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  const getFilteredOptions = async () =>\n    customFilterOptions\n      ? await customFilterOptions(options, searchTextForFilter)\n      : filterOptions(options, searchTextForFilter);\n\n  const updateFocus = (offset: number) => {\n    let newFocus = focusIndex + offset;\n    newFocus = Math.max(0, newFocus);\n    newFocus = Math.min(newFocus, options.length + Math.max(skipIndex - 1, 0));\n    setFocusIndex(newFocus);\n  };\n\n  useEffect(() => {\n    listRef?.current?.querySelector(`[tabIndex='${focusIndex}']`)?.focus();\n  }, [focusIndex]);\n\n  const [isAllOptionSelected, hasSelectableOptions] = useMemo(() => {\n    const filteredOptionsList = filteredOptions.filter((o) => !o.disabled);\n    return [\n      filteredOptionsList.every(\n        (o) => value.findIndex((v) => v.value === o.value) !== -1\n      ),\n      filteredOptionsList.length !== 0,\n    ];\n    // eslint-disable-next-line\n  }, [filteredOptions, value]);\n\n  useEffect(() => {\n    getFilteredOptions().then(setFilteredOptions);\n  }, [searchTextForFilter, options]);\n\n  return (\n    <div className=\"select-panel\" role=\"listbox\" ref={listRef}>\n      {!disableSearch && (\n        <div className=\"search\">\n          <input\n            placeholder={t(\"search\")}\n            type=\"text\"\n            aria-describedby={t(\"search\")}\n            onChange={handleSearchChange}\n            onFocus={handleSearchFocus}\n            value={searchText}\n            ref={searchInputRef}\n            tabIndex={0}\n          />\n          <button\n            type=\"button\"\n            className=\"search-clear-button\"\n            hidden={!searchText}\n            onClick={handleClear}\n            aria-label={t(\"clearSearch\")}\n          >\n            {ClearIcon || <Cross />}\n          </button>\n        </div>\n      )}\n\n      <ul className=\"options\">\n        {hasSelectAll && hasSelectableOptions && (\n          <SelectItem\n            tabIndex={skipIndex === 1 ? 0 : 1}\n            checked={isAllOptionSelected}\n            option={selectAllOption}\n            onSelectionChanged={selectAllChanged}\n            onClick={() => handleItemClicked(1)}\n            itemRenderer={ItemRenderer}\n            disabled={disabled}\n          />\n        )}\n\n        {filteredOptions.length ? (\n          <SelectList\n            skipIndex={skipIndex}\n            options={filteredOptions}\n            onClick={(_e, index) => handleItemClicked(index)}\n          />\n        ) : (\n          <li className=\"no-options\">{t(\"noOptions\")}</li>\n        )}\n      </ul>\n    </div>\n  );\n};\n\nexport default SelectPanel;\n","import React from \"react\";\n\nexport const Arrow = ({ expanded }) => (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    className=\"dropdown-heading-dropdown-arrow gray\"\n  >\n    <path d={expanded ? \"M18 15 12 9 6 15\" : \"M6 9L12 15 18 9\"} />\n  </svg>\n);\n","import React from \"react\";\n\nimport { useMultiSelect } from \"../hooks/use-multi-select\";\n\nexport const DropdownHeader = () => {\n  const { t, value, options, valueRenderer } = useMultiSelect();\n\n  const noneSelected = value.length === 0;\n  const allSelected = value.length === options.length;\n  const customText = valueRenderer && valueRenderer(value, options);\n\n  const getSelectedText = () => value.map((s) => s.label).join(\", \");\n\n  return noneSelected ? (\n    <span className=\"gray\">{customText || t(\"selectSomeItems\")}</span>\n  ) : (\n    <span>\n      {customText ||\n        (allSelected ? t(\"allItemsAreSelected\") : getSelectedText())}\n    </span>\n  );\n};\n","import React from \"react\";\n\nexport const Loading = ({ size = 24 }) => (\n  <span\n    style={{\n      width: size,\n      marginRight: \"0.2rem\",\n    }}\n  >\n    <svg\n      width={size}\n      height={size}\n      className=\"spinner\"\n      viewBox=\"0 0 50 50\"\n      style={{ display: \"inline\", verticalAlign: \"middle\" }}\n    >\n      <circle cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" className=\"path\"></circle>\n    </svg>\n  </span>\n);\n","/**\n * A generic dropdown component.  It takes the children of the component\n * and hosts it in the component.  When the component is selected, it\n * drops-down the contentComponent and applies the contentProps.\n */\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { useDidUpdateEffect } from \"../hooks/use-did-update-effect\";\nimport { useKey } from \"../hooks/use-key\";\nimport { useMultiSelect } from \"../hooks/use-multi-select\";\nimport { KEY } from \"../lib/constants\";\nimport SelectPanel from \"../select-panel\";\nimport { Cross } from \"../select-panel/cross\";\nimport { Arrow } from \"./arrow\";\nimport { DropdownHeader } from \"./header\";\nimport { Loading } from \"./loading\";\n\nconst Dropdown = () => {\n  const {\n    t,\n    onMenuToggle,\n    ArrowRenderer,\n    shouldToggleOnHover,\n    isLoading,\n    disabled,\n    onChange,\n    labelledBy,\n    value,\n    isOpen,\n    defaultIsOpen,\n    ClearSelectedIcon,\n  } = useMultiSelect();\n\n  const [isInternalExpand, setIsInternalExpand] = useState(true);\n  const [expanded, setExpanded] = useState(defaultIsOpen);\n  const [hasFocus, setHasFocus] = useState(false);\n  const FinalArrow = ArrowRenderer || Arrow;\n\n  const wrapper: any = useRef();\n\n  useDidUpdateEffect(() => {\n    onMenuToggle && onMenuToggle(expanded);\n  }, [expanded]);\n\n  useEffect(() => {\n    if (defaultIsOpen === undefined && typeof isOpen === \"boolean\") {\n      setIsInternalExpand(false);\n      setExpanded(isOpen);\n    }\n  }, [isOpen]);\n\n  const handleKeyDown = (e) => {\n    // allows space and enter when focused on input/button\n    if (\n      [\"text\", \"button\"].includes(e.target.type) &&\n      [KEY.SPACE, KEY.ENTER].includes(e.code)\n    ) {\n      return;\n    }\n\n    if (isInternalExpand) {\n      if (e.code === KEY.ESCAPE) {\n        setExpanded(false);\n        wrapper?.current?.focus();\n      } else {\n        setExpanded(true);\n      }\n    }\n    e.preventDefault();\n  };\n\n  useKey([KEY.ENTER, KEY.ARROW_DOWN, KEY.SPACE, KEY.ESCAPE], handleKeyDown, {\n    target: wrapper,\n  });\n\n  const handleHover = (iexpanded: boolean) => {\n    isInternalExpand && shouldToggleOnHover && setExpanded(iexpanded);\n  };\n\n  const handleFocus = () => !hasFocus && setHasFocus(true);\n\n  const handleBlur = (e) => {\n    if (!e.currentTarget.contains(e.relatedTarget) && isInternalExpand) {\n      setHasFocus(false);\n      setExpanded(false);\n    }\n  };\n\n  const handleMouseEnter = () => handleHover(true);\n\n  const handleMouseLeave = () => handleHover(false);\n\n  const toggleExpanded = () => {\n    isInternalExpand && setExpanded(isLoading || disabled ? false : !expanded);\n  };\n\n  const handleClearSelected = (e) => {\n    e.stopPropagation();\n    onChange([]);\n    isInternalExpand && setExpanded(false);\n  };\n\n  return (\n    <div\n      tabIndex={0}\n      className=\"dropdown-container\"\n      aria-labelledby={labelledBy}\n      aria-expanded={expanded}\n      aria-readonly={true}\n      aria-disabled={disabled}\n      ref={wrapper}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n    >\n      <div className=\"dropdown-heading\" onClick={toggleExpanded}>\n        <div className=\"dropdown-heading-value\">\n          <DropdownHeader />\n        </div>\n        {isLoading && <Loading />}\n        {value.length > 0 && (\n          <button\n            type=\"button\"\n            className=\"clear-selected-button\"\n            onClick={handleClearSelected}\n            disabled={disabled}\n            aria-label={t(\"clearSelected\")}\n          >\n            {ClearSelectedIcon || <Cross />}\n          </button>\n        )}\n        <FinalArrow expanded={expanded} />\n      </div>\n      {expanded && (\n        <div className=\"dropdown-content\">\n          <div className=\"panel-content\">\n            <SelectPanel />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Dropdown;\n","import \"../style.css\";\n\nimport React from \"react\";\n\nimport { MultiSelectProvider } from \"../hooks/use-multi-select\";\nimport { ISelectProps } from \"../lib/interfaces\";\nimport Dropdown from \"./dropdown\";\n\nconst MultiSelect = (props: ISelectProps) => (\n  <MultiSelectProvider props={props}>\n    <div className={`rmsc ${props.className || \"multi-select\"}`}>\n      <Dropdown />\n    </div>\n  </MultiSelectProvider>\n);\n\nexport default MultiSelect;\n"]},"metadata":{},"sourceType":"module"}