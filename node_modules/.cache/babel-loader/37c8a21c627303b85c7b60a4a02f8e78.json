{"ast":null,"code":"'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {} // States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\n\n\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\n\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n\n  this._U = 0;\n  this._V = 0;\n  this._W = null;\n  this._X = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\n\nPromise._Y = null;\nPromise._Z = null;\nPromise._0 = noop;\n\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\n\nfunction handle(self, deferred) {\n  while (self._V === 3) {\n    self = self._W;\n  }\n\n  if (Promise._Y) {\n    Promise._Y(self);\n  }\n\n  if (self._V === 0) {\n    if (self._U === 0) {\n      self._U = 1;\n      self._X = deferred;\n      return;\n    }\n\n    if (self._U === 1) {\n      self._U = 2;\n      self._X = [self._X, deferred];\n      return;\n    }\n\n    self._X.push(deferred);\n\n    return;\n  }\n\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function () {\n    var cb = self._V === 1 ? deferred.onFulfilled : deferred.onRejected;\n\n    if (cb === null) {\n      if (self._V === 1) {\n        resolve(deferred.promise, self._W);\n      } else {\n        reject(deferred.promise, self._W);\n      }\n\n      return;\n    }\n\n    var ret = tryCallOne(cb, self._W);\n\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\n\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(self, new TypeError('A promise cannot be resolved with itself.'));\n  }\n\n  if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n    var then = getThen(newValue);\n\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n\n    if (then === self.then && newValue instanceof Promise) {\n      self._V = 3;\n      self._W = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n\n  self._V = 1;\n  self._W = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._V = 2;\n  self._W = newValue;\n\n  if (Promise._Z) {\n    Promise._Z(self, newValue);\n  }\n\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._U === 1) {\n    handle(self, self._X);\n    self._X = null;\n  }\n\n  if (self._U === 2) {\n    for (var i = 0; i < self._X.length; i++) {\n      handle(self, self._X[i]);\n    }\n\n    self._X = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n/**\r\n * Take a potentially misbehaving resolver function and make sure\r\n * onFulfilled and onRejected are only called once.\r\n *\r\n * Makes no guarantees about asynchrony.\r\n */\n\n\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}","map":{"version":3,"sources":["/Users/vyduong/Downloads/AD_WebBanLapTop/node_modules/promise/lib/core.js"],"names":["asap","require","noop","LAST_ERROR","IS_ERROR","getThen","obj","then","ex","tryCallOne","fn","a","tryCallTwo","b","module","exports","Promise","TypeError","_U","_V","_W","_X","doResolve","_Y","_Z","_0","prototype","onFulfilled","onRejected","constructor","safeThen","res","handle","Handler","self","resolve","reject","deferred","push","handleResolved","cb","promise","ret","newValue","finale","bind","i","length","done","value","reason"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar asap = require('asap/raw');\r\n\r\nfunction noop() {}\r\n\r\n// States:\r\n//\r\n// 0 - pending\r\n// 1 - fulfilled with _value\r\n// 2 - rejected with _value\r\n// 3 - adopted the state of another promise, _value\r\n//\r\n// once the state is no longer pending (0) it is immutable\r\n\r\n// All `_` prefixed properties will be reduced to `_{random number}`\r\n// at build time to obfuscate them and discourage their use.\r\n// We don't use symbols or Object.defineProperty to fully hide them\r\n// because the performance isn't good enough.\r\n\r\n\r\n// to avoid using try/catch inside critical functions, we\r\n// extract them to here.\r\nvar LAST_ERROR = null;\r\nvar IS_ERROR = {};\r\nfunction getThen(obj) {\r\n  try {\r\n    return obj.then;\r\n  } catch (ex) {\r\n    LAST_ERROR = ex;\r\n    return IS_ERROR;\r\n  }\r\n}\r\n\r\nfunction tryCallOne(fn, a) {\r\n  try {\r\n    return fn(a);\r\n  } catch (ex) {\r\n    LAST_ERROR = ex;\r\n    return IS_ERROR;\r\n  }\r\n}\r\nfunction tryCallTwo(fn, a, b) {\r\n  try {\r\n    fn(a, b);\r\n  } catch (ex) {\r\n    LAST_ERROR = ex;\r\n    return IS_ERROR;\r\n  }\r\n}\r\n\r\nmodule.exports = Promise;\r\n\r\nfunction Promise(fn) {\r\n  if (typeof this !== 'object') {\r\n    throw new TypeError('Promises must be constructed via new');\r\n  }\r\n  if (typeof fn !== 'function') {\r\n    throw new TypeError('Promise constructor\\'s argument is not a function');\r\n  }\r\n  this._U = 0;\r\n  this._V = 0;\r\n  this._W = null;\r\n  this._X = null;\r\n  if (fn === noop) return;\r\n  doResolve(fn, this);\r\n}\r\nPromise._Y = null;\r\nPromise._Z = null;\r\nPromise._0 = noop;\r\n\r\nPromise.prototype.then = function(onFulfilled, onRejected) {\r\n  if (this.constructor !== Promise) {\r\n    return safeThen(this, onFulfilled, onRejected);\r\n  }\r\n  var res = new Promise(noop);\r\n  handle(this, new Handler(onFulfilled, onRejected, res));\r\n  return res;\r\n};\r\n\r\nfunction safeThen(self, onFulfilled, onRejected) {\r\n  return new self.constructor(function (resolve, reject) {\r\n    var res = new Promise(noop);\r\n    res.then(resolve, reject);\r\n    handle(self, new Handler(onFulfilled, onRejected, res));\r\n  });\r\n}\r\nfunction handle(self, deferred) {\r\n  while (self._V === 3) {\r\n    self = self._W;\r\n  }\r\n  if (Promise._Y) {\r\n    Promise._Y(self);\r\n  }\r\n  if (self._V === 0) {\r\n    if (self._U === 0) {\r\n      self._U = 1;\r\n      self._X = deferred;\r\n      return;\r\n    }\r\n    if (self._U === 1) {\r\n      self._U = 2;\r\n      self._X = [self._X, deferred];\r\n      return;\r\n    }\r\n    self._X.push(deferred);\r\n    return;\r\n  }\r\n  handleResolved(self, deferred);\r\n}\r\n\r\nfunction handleResolved(self, deferred) {\r\n  asap(function() {\r\n    var cb = self._V === 1 ? deferred.onFulfilled : deferred.onRejected;\r\n    if (cb === null) {\r\n      if (self._V === 1) {\r\n        resolve(deferred.promise, self._W);\r\n      } else {\r\n        reject(deferred.promise, self._W);\r\n      }\r\n      return;\r\n    }\r\n    var ret = tryCallOne(cb, self._W);\r\n    if (ret === IS_ERROR) {\r\n      reject(deferred.promise, LAST_ERROR);\r\n    } else {\r\n      resolve(deferred.promise, ret);\r\n    }\r\n  });\r\n}\r\nfunction resolve(self, newValue) {\r\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\r\n  if (newValue === self) {\r\n    return reject(\r\n      self,\r\n      new TypeError('A promise cannot be resolved with itself.')\r\n    );\r\n  }\r\n  if (\r\n    newValue &&\r\n    (typeof newValue === 'object' || typeof newValue === 'function')\r\n  ) {\r\n    var then = getThen(newValue);\r\n    if (then === IS_ERROR) {\r\n      return reject(self, LAST_ERROR);\r\n    }\r\n    if (\r\n      then === self.then &&\r\n      newValue instanceof Promise\r\n    ) {\r\n      self._V = 3;\r\n      self._W = newValue;\r\n      finale(self);\r\n      return;\r\n    } else if (typeof then === 'function') {\r\n      doResolve(then.bind(newValue), self);\r\n      return;\r\n    }\r\n  }\r\n  self._V = 1;\r\n  self._W = newValue;\r\n  finale(self);\r\n}\r\n\r\nfunction reject(self, newValue) {\r\n  self._V = 2;\r\n  self._W = newValue;\r\n  if (Promise._Z) {\r\n    Promise._Z(self, newValue);\r\n  }\r\n  finale(self);\r\n}\r\nfunction finale(self) {\r\n  if (self._U === 1) {\r\n    handle(self, self._X);\r\n    self._X = null;\r\n  }\r\n  if (self._U === 2) {\r\n    for (var i = 0; i < self._X.length; i++) {\r\n      handle(self, self._X[i]);\r\n    }\r\n    self._X = null;\r\n  }\r\n}\r\n\r\nfunction Handler(onFulfilled, onRejected, promise){\r\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\r\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\r\n  this.promise = promise;\r\n}\r\n\r\n/**\r\n * Take a potentially misbehaving resolver function and make sure\r\n * onFulfilled and onRejected are only called once.\r\n *\r\n * Makes no guarantees about asynchrony.\r\n */\r\nfunction doResolve(fn, promise) {\r\n  var done = false;\r\n  var res = tryCallTwo(fn, function (value) {\r\n    if (done) return;\r\n    done = true;\r\n    resolve(promise, value);\r\n  }, function (reason) {\r\n    if (done) return;\r\n    done = true;\r\n    reject(promise, reason);\r\n  });\r\n  if (!done && res === IS_ERROR) {\r\n    done = true;\r\n    reject(promise, LAST_ERROR);\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"script"}