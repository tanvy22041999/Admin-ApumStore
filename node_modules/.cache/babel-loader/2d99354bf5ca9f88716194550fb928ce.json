{"ast":null,"code":"import _objectSpread from \"/Users/vyduong/Downloads/CMD_WebBanDienThoai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _classCallCheck from \"/Users/vyduong/Downloads/CMD_WebBanDienThoai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vyduong/Downloads/CMD_WebBanDienThoai/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport axios from 'axios';\nimport _ from \"lodash\";\n\nvar AxiosService = /*#__PURE__*/function () {\n  function AxiosService() {\n    var _this = this;\n\n    _classCallCheck(this, AxiosService);\n\n    this.changeHeaders = function (headers) {\n      if (typeof headers === \"undefined\") {\n        return;\n      }\n\n      var defaultHeaders = _.get(_this.instance, \"defaults.headers\");\n\n      var cleanHeaders = _.omitBy( // xóa đi những header empty\n      _objectSpread(_objectSpread({}, defaultHeaders), headers), _.isEmpty);\n\n      return _this.instance.defaults.headers = cleanHeaders;\n    };\n\n    //tạo instance (thực thể) thuộc axios\n    var instance = axios.create({\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    instance.interceptors.request.use(function (config) {\n      return config;\n    }, function (error) {\n      return Promise.reject(error);\n    });\n    instance.interceptors.response.use(this.handleSuccess, this.handleError); //đưa instance đi khắp các fucntion trong class\n\n    this.instance = instance;\n  } //xử lý khi gọi API thành công\n\n\n  _createClass(AxiosService, [{\n    key: \"handleSuccess\",\n    value: function handleSuccess(response) {\n      return response;\n    } //xử lý thất bại\n\n  }, {\n    key: \"handleError\",\n    value: function handleError(error) {\n      return Promise.reject(error);\n    }\n  }, {\n    key: \"get\",\n    value: function get(url, headers) {\n      if (_.isEmpty(headers)) {\n        return this.instance.get(url);\n      }\n\n      return this.instance.get(url, headers);\n    }\n  }, {\n    key: \"post\",\n    value: function post(url, body, headers) {\n      if (_.isEmpty(headers)) {\n        return this.instance.post(url, body);\n      }\n\n      return this.instance.post(url, body, headers);\n    }\n  }, {\n    key: \"put\",\n    value: function put(url, body, headers) {\n      if (_.isEmpty(headers)) {\n        return this.instance.put(url, body);\n      }\n\n      return this.instance.put(url, body, headers);\n    }\n  }, {\n    key: \"delete\",\n    value: function _delete(url, headers) {\n      if (_.isEmpty(headers)) {\n        return this.instance.delete(url);\n      }\n\n      return this.instance.delete(url, headers);\n    }\n  }]);\n\n  return AxiosService;\n}();\n\nexport default new AxiosService();","map":{"version":3,"sources":["/Users/vyduong/Downloads/CMD_WebBanDienThoai/src/utils/AxiosService.js"],"names":["axios","_","AxiosService","changeHeaders","headers","defaultHeaders","get","instance","cleanHeaders","omitBy","isEmpty","defaults","create","interceptors","request","use","config","error","Promise","reject","response","handleSuccess","handleError","url","body","post","put","delete"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,CAAP,MAAc,QAAd;;IAEMC,Y;AACJ,0BAAa;AAAA;;AAAA;;AAAA,SAuDdC,aAvDc,GAuDE,UAAAC,OAAO,EAAI;AAC1B,UAAI,OAAOA,OAAP,KAAmB,WAAvB,EAAoC;AACnC;AACA;;AACD,UAAMC,cAAc,GAAGJ,CAAC,CAACK,GAAF,CAAM,KAAI,CAACC,QAAX,EAAqB,kBAArB,CAAvB;;AACA,UAAMC,YAAY,GAAGP,CAAC,CAACQ,MAAF,EAAW;AAAX,sCAEhBJ,cAFgB,GAGhBD,OAHgB,GAKpBH,CAAC,CAACS,OALkB,CAArB;;AAOA,aAAO,KAAI,CAACH,QAAL,CAAcI,QAAd,CAAuBP,OAAvB,GAAiCI,YAAxC;AACA,KApEa;;AACb;AACA,QAAMD,QAAQ,GAAGP,KAAK,CAACY,MAAN,CAAa;AAC7BR,MAAAA,OAAO,EAAE;AACR,wBAAgB;AADR;AADoB,KAAb,CAAjB;AAKAG,IAAAA,QAAQ,CAACM,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CACC,UAAAC,MAAM;AAAA,aAAIA,MAAJ;AAAA,KADP,EAEC,UAAAC,KAAK;AAAA,aAAIC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAJ;AAAA,KAFN;AAIAV,IAAAA,QAAQ,CAACM,YAAT,CAAsBO,QAAtB,CAA+BL,GAA/B,CAAmC,KAAKM,aAAxC,EACC,KAAKC,WADN,EAXa,CAab;;AACA,SAAKf,QAAL,GAAgBA,QAAhB;AACA,G,CAED;;;;;kCACca,Q,EAAS;AACtB,aAAOA,QAAP;AACA,K,CAED;;;;gCACYH,K,EAAM;AACjB,aAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA;;;wBAEGM,G,EAAKnB,O,EAAQ;AAChB,UAAIH,CAAC,CAACS,OAAF,CAAUN,OAAV,CAAJ,EAAwB;AACvB,eAAO,KAAKG,QAAL,CAAcD,GAAd,CAAkBiB,GAAlB,CAAP;AACA;;AACD,aAAO,KAAKhB,QAAL,CAAcD,GAAd,CAAkBiB,GAAlB,EAAuBnB,OAAvB,CAAP;AACA;;;yBAEImB,G,EAAKC,I,EAAMpB,O,EAAQ;AACvB,UAAIH,CAAC,CAACS,OAAF,CAAUN,OAAV,CAAJ,EAAwB;AACvB,eAAO,KAAKG,QAAL,CAAckB,IAAd,CAAmBF,GAAnB,EAAwBC,IAAxB,CAAP;AACA;;AACD,aAAO,KAAKjB,QAAL,CAAckB,IAAd,CAAmBF,GAAnB,EAAwBC,IAAxB,EAA8BpB,OAA9B,CAAP;AACA;;;wBAEGmB,G,EAAKC,I,EAAMpB,O,EAAQ;AACtB,UAAIH,CAAC,CAACS,OAAF,CAAUN,OAAV,CAAJ,EAAwB;AACvB,eAAO,KAAKG,QAAL,CAAcmB,GAAd,CAAkBH,GAAlB,EAAuBC,IAAvB,CAAP;AACA;;AACD,aAAO,KAAKjB,QAAL,CAAcmB,GAAd,CAAkBH,GAAlB,EAAuBC,IAAvB,EAA6BpB,OAA7B,CAAP;AACA;;;4BAEMmB,G,EAAKnB,O,EAAQ;AACnB,UAAIH,CAAC,CAACS,OAAF,CAAUN,OAAV,CAAJ,EAAwB;AACvB,eAAO,KAAKG,QAAL,CAAcoB,MAAd,CAAqBJ,GAArB,CAAP;AACA;;AACD,aAAO,KAAKhB,QAAL,CAAcoB,MAAd,CAAqBJ,GAArB,EAA0BnB,OAA1B,CAAP;AACA;;;;;;AAkBF,eAAe,IAAIF,YAAJ,EAAf","sourcesContent":["import axios from 'axios';\nimport _ from \"lodash\";\n\nclass AxiosService {\n  constructor(){\n\t\t//tạo instance (thực thể) thuộc axios\n\t\tconst instance = axios.create({\n\t\t\theaders: {\n\t\t\t\t\"Content-Type\": \"application/json\",\n\t\t\t},\n\t\t});\n\t\tinstance.interceptors.request.use(\n\t\t\tconfig => config,\n\t\t\terror => Promise.reject(error)\n\t\t);\n\t\tinstance.interceptors.response.use(this.handleSuccess,\n\t\t\tthis.handleError);\n\t\t//đưa instance đi khắp các fucntion trong class\n\t\tthis.instance = instance;\n\t}\n\n\t//xử lý khi gọi API thành công\n\thandleSuccess(response){\n\t\treturn response;\n\t}\n\n\t//xử lý thất bại\n\thandleError(error){\n\t\treturn Promise.reject(error);\n\t}\n\n\tget(url, headers){\n\t\tif (_.isEmpty(headers)) {\n\t\t\treturn this.instance.get(url);\n\t\t}\n\t\treturn this.instance.get(url, headers);\n\t}\n\n\tpost(url, body, headers){\n\t\tif (_.isEmpty(headers)) {\n\t\t\treturn this.instance.post(url, body);\n\t\t}\n\t\treturn this.instance.post(url, body, headers);\n\t}\n\n\tput(url, body, headers){\n\t\tif (_.isEmpty(headers)) {\n\t\t\treturn this.instance.put(url, body);\n\t\t}\n\t\treturn this.instance.put(url, body, headers);\n\t}\n\n\tdelete(url, headers){\n\t\tif (_.isEmpty(headers)) {\n\t\t\treturn this.instance.delete(url);\n\t\t}\n\t\treturn this.instance.delete(url, headers);\n\t}\n\n\tchangeHeaders = headers => {\n\t\tif (typeof headers === \"undefined\") {\n\t\t\treturn;\n\t\t}\n\t\tconst defaultHeaders = _.get(this.instance, \"defaults.headers\");\n\t\tconst cleanHeaders = _.omitBy(  // xóa đi những header empty\n\t\t\t{\n\t\t\t\t...defaultHeaders,\n\t\t\t\t...headers\n\t\t\t},\n\t\t\t_.isEmpty\n\t\t);\n\t\treturn this.instance.defaults.headers = cleanHeaders;\n\t};\n}\n\nexport default new AxiosService();\n"]},"metadata":{},"sourceType":"module"}